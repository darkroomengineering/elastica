{"version":3,"file":"elastic-collisions-react.mjs","sources":["../../../node_modules/.pnpm/@darkroom.engineering+tempus@0.0.46/node_modules/@darkroom.engineering/tempus/dist/tempus.modern.mjs","../../../node_modules/.pnpm/just-debounce-it@3.2.0/node_modules/just-debounce-it/index.mjs","../../../node_modules/.pnpm/@darkroom.engineering+hamo@0.6.45_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@darkroom.engineering/hamo/dist/hamo.modern.mjs","../../../node_modules/.pnpm/nanoevents@9.0.0/node_modules/nanoevents/index.js","../../../node_modules/.pnpm/@use-gesture+core@10.3.1/node_modules/@use-gesture/core/dist/maths-0ab39ae9.esm.js","../../../node_modules/.pnpm/@use-gesture+core@10.3.1/node_modules/@use-gesture/core/dist/actions-fe213e88.esm.js","../../../node_modules/.pnpm/@use-gesture+core@10.3.1/node_modules/@use-gesture/core/dist/use-gesture-core.esm.js","../../../node_modules/.pnpm/@use-gesture+react@10.3.1_react@18.3.1/node_modules/@use-gesture/react/dist/use-gesture-react.esm.js","../../engine/dist/elastic-collisions.mjs","../src/presets.js","../src/index.js","../src/utils.js"],"sourcesContent":["var a=\"undefined\"!=typeof window&&new class{constructor(){this.raf=a=>{requestAnimationFrame(this.raf);const t=a-this.now;this.now=a;for(let s=0;s<this.callbacks.length;s++)this.callbacks[s].callback(a,t)},this.callbacks=[],this.now=performance.now(),requestAnimationFrame(this.raf)}add(a,t=0){return this.callbacks.push({callback:a,priority:t}),this.callbacks.sort((a,t)=>a.priority-t.priority),()=>this.remove(a)}remove(a){this.callbacks=this.callbacks.filter(({callback:t})=>a!==t)}};export{a as default};\n//# sourceMappingURL=tempus.modern.mjs.map\n","var functionDebounce = debounce;\n\nfunction debounce(fn, wait, callFirst) {\n  var timeout = null;\n  var debouncedFn = null;\n\n  var clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n\n      debouncedFn = null;\n      timeout = null;\n    }\n  };\n\n  var flush = function() {\n    var call = debouncedFn;\n    clear();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var debounceWrapper = function() {\n    if (!wait) {\n      return fn.apply(this, arguments);\n    }\n\n    var context = this;\n    var args = arguments;\n    var callNow = callFirst && !timeout;\n    clear();\n\n    debouncedFn = function() {\n      fn.apply(context, args);\n    };\n\n    timeout = setTimeout(function() {\n      timeout = null;\n\n      if (!callNow) {\n        var call = debouncedFn;\n        debouncedFn = null;\n\n        return call();\n      }\n    }, wait);\n\n    if (callNow) {\n      return debouncedFn();\n    }\n  };\n\n  debounceWrapper.cancel = clear;\n  debounceWrapper.flush = flush;\n\n  return debounceWrapper;\n}\n\nexport {functionDebounce as default};\n","import{useCallback as e,useEffect as t,useState as n,useMemo as r,useRef as o}from\"react\";import c from\"@darkroom.engineering/tempus\";import i from\"just-debounce-it\";import{createNanoEvents as u}from\"nanoevents\";function s(n,r){const o=e(e=>{n.current&&!n.current.contains(e.target)&&r()},[n,r]);t(()=>{if(n.current)return document.addEventListener(\"mousedown\",o),()=>{document.removeEventListener(\"mousedown\",o)}},[o,n])}function d(){const[e,r]=n(!1);return t(()=>{r(!0)},[]),e}function l(){const e=d();return r(()=>{if(!e)return;const t=window.location,n=t.href,r=new URLSearchParams(t.search),o=n.includes(\"#debug\")||n.includes(\"/_debug\")||r.has(\"debug\")||\"development\"===process.env.NODE_ENV,c=n.includes(\"#production\")||r.has(\"production\");return o&&!c},[e])}function a(){const[e,r]=n();return t(()=>{function e(){r(document.readyState)}return document.addEventListener(\"readystatechange\",e,!1),e(),()=>document.removeEventListener(\"readystatechange\",e,!1)},[]),e}function f(e,n=0){t(()=>{if(e)return c.add(e,n),()=>c.remove(e)},[e,n])}function h({root:r=null,rootMargin:c=\"0px\",threshold:i=0,once:u=!1,lazy:s=!1,callback:d=(()=>{})}={},l=[]){const a=o({}),[f,h]=n({}),[m,v]=n();t(()=>{if(!m)return;const e=new IntersectionObserver(([t])=>{s?a.current=t:h(t),d(t),u&&t.isIntersecting&&e.disconnect()},{root:r,rootMargin:c,threshold:i});return e.observe(m),()=>{e.disconnect()}},[m,r,c,i,s,u,...l]);const g=e(()=>a.current,[]);return[v,s?g:f]}function m(e,n=1e3,r=[]){t(()=>{const t=setInterval(e,n);return()=>clearInterval(t)},[n,...r])}function v(){const[e,r]=n();return t(()=>{function e(){r(\"ontouchstart\"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener(\"resize\",e,!1),e(),()=>{window.removeEventListener(\"resize\",e,!1)}},[]),e}function g(e){const[r,o]=n();return t(()=>{const t=window.matchMedia(e);function n(){o(t.matches)}return t.addEventListener(\"change\",n,!1),n(),()=>t.removeEventListener(\"change\",n,!1)},[e]),r}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function w(e){\"sticky\"===getComputedStyle(e).position&&(e.style.setProperty(\"position\",\"relative\"),e.dataset.sticky=\"true\"),e.offsetParent&&w(e.offsetParent)}function b(e){var t;\"true\"===(null==e||null==(t=e.dataset)?void 0:t.sticky)&&(e.style.removeProperty(\"position\"),delete e.dataset.sticky),e.parentNode&&b(e.parentNode)}function y(e,t=0){const n=t+e.offsetTop;return e.offsetParent?y(e.offsetParent,n):n}function z(e,t=0){const n=t+e.offsetLeft;return e.offsetParent?z(e.offsetParent,n):n}function E(e,t=0){var n;const r=t+(null!=(n=null==e?void 0:e.scrollTop)?n:0);return e.parentNode?E(e.parentNode,r):r+window.scrollY}function L(e,t=0){var n;const r=t+(null!=(n=null==e?void 0:e.scrollLeft)?n:0);return e.parentNode?L(e.parentNode,r):r+window.scrollX}const P=u();function k({ignoreTransform:r=!1,ignoreSticky:c=!0,debounce:u=500,lazy:s=!1,callback:d}={}){const[l,a]=n(),f=o({}),[h,m]=n({}),v=e(({top:e,left:t,width:n,height:r,element:o})=>{var c,i,u,l,a;e=null!=(c=e)?c:f.current.top,t=null!=(i=t)?i:f.current.left,n=null!=(u=n)?u:f.current.width,r=null!=(l=r)?l:f.current.height,o=null!=(a=o)?a:f.current.element,e===f.current.top&&t===f.current.left&&n===f.current.width&&r===f.current.height&&o===f.current.element||(f.current.top=e,f.current.y=e,f.current.width=n,f.current.height=r,f.current.left=t,f.current.x=t,f.current.bottom=e+r,f.current.right=t+n,f.current.element=o,null==d||d(f.current),s||m(p({},f.current)))},[s]);t(()=>{if(!l)return;const e=l.getBoundingClientRect();v({width:e.width,height:e.height});const t=i(([e])=>{v({width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize})},u),n=new ResizeObserver(t);return n.observe(l),()=>{n.disconnect(),t.cancel()}},[l,u,v]);const[g,k]=n(),x=e(()=>{if(!l)return;let e,t;if(c&&w(l),r)e=y(l),t=z(l);else{const n=l.getBoundingClientRect();e=n.top+E(l),t=n.left+L(l)}c&&b(l),v({top:e,left:t,element:l})},[r,c,l,v]);t(()=>{x();const e=i(x,u),t=new ResizeObserver(e);return t.observe(null!=g?g:document.body),()=>{t.disconnect(),e.cancel()}},[g,u,x]);const O=e(()=>{if(!l)return;const e=l.getBoundingClientRect();v({width:e.width,height:e.height}),x()},[l,x,v]);t(()=>(f.current.resize=O,s||m(p({},f.current)),P.on(\"resize\",O)),[O,s]);const N=e(()=>f.current,[]);return[a,s?N:h,k]}function x({lazy:c=!1,debounce:u=500,box:s=\"border-box\",callback:d=(()=>{})}={}){const l=o({}),[a,f]=n({}),[h,m]=n(),v=o(!1),g=r(()=>i(f,u),[u]),p=e(([e])=>{l.current=e,d(e),c||(v.current?f(e):g(e)),v.current=!1},[c,g]);t(()=>{if(!h)return;v.current=!0;const e=new ResizeObserver(p);return e.observe(h,{box:s}),()=>{e.disconnect(),g.cancel()}},[h,u,s,p,g]);const w=e(()=>l.current,[]);return[m,c?w:a]}function O(e=[],t=[]){const n=r(()=>t&&[t].flat(),[t]),o=r(()=>e&&[e].flat(),[e]);return r(()=>{if(!n||!o)return;const t=o.map(e=>{var t;return null==(t=n.find(t=>t.type===e))?void 0:t.props.children});return e[0]?t:t[0]},[n,o])}function N(e=500){const[r,o]=n(),[c,u]=n();return t(()=>{const t=i(()=>{o(Math.min(window.innerWidth,document.documentElement.clientWidth)),u(Math.min(window.innerHeight,document.documentElement.clientHeight))},e);return window.addEventListener(\"resize\",t,!1),t(),()=>window.removeEventListener(\"resize\",t,!1)},[e]),{width:r,height:c}}k.resize=()=>{P.emit(\"resize\")};export{l as useDebug,a as useDocumentReadyState,f as useFrame,h as useIntersectionObserver,m as useInterval,d as useIsClient,v as useIsTouchDevice,g as useMediaQuery,s as useOutsideClickEvent,k as useRect,x as useResizeObserver,O as useSlots,N as useWindowSize};\n//# sourceMappingURL=hamo.modern.mjs.map\n","export let createNanoEvents = () => ({\n  emit(event, ...args) {\n    for (\n      let i = 0,\n        callbacks = this.events[event] || [],\n        length = callbacks.length;\n      i < length;\n      i++\n    ) {\n      callbacks[i](...args)\n    }\n  },\n  events: {},\n  on(event, cb) {\n    ;(this.events[event] ||= []).push(cb)\n    return () => {\n      this.events[event] = this.events[event]?.filter(i => cb !== i)\n    }\n  }\n})\n","function clamp(v, min, max) {\n  return Math.max(min, Math.min(v, max));\n}\nconst V = {\n  toVector(v, fallback) {\n    if (v === undefined) v = fallback;\n    return Array.isArray(v) ? v : [v, v];\n  },\n  add(v1, v2) {\n    return [v1[0] + v2[0], v1[1] + v2[1]];\n  },\n  sub(v1, v2) {\n    return [v1[0] - v2[0], v1[1] - v2[1]];\n  },\n  addTo(v1, v2) {\n    v1[0] += v2[0];\n    v1[1] += v2[1];\n  },\n  subTo(v1, v2) {\n    v1[0] -= v2[0];\n    v1[1] -= v2[1];\n  }\n};\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return Math.pow(distance, constant * 5);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\nfunction rubberbandIfOutOfBounds(position, min, max, constant = 0.15) {\n  if (constant === 0) return clamp(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\nfunction computeRubberband(bounds, [Vx, Vy], [Rx, Ry]) {\n  const [[X0, X1], [Y0, Y1]] = bounds;\n  return [rubberbandIfOutOfBounds(Vx, X0, X1, Rx), rubberbandIfOutOfBounds(Vy, Y0, Y1, Ry)];\n}\n\nexport { V, computeRubberband as c, rubberbandIfOutOfBounds as r };\n","import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\nfunction hasCapture(capture = false, actionKey) {\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 || (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\nfunction distanceAngle(P1, P2) {\n  try {\n    const dx = P2.clientX - P1.clientX;\n    const dy = P2.clientY - P1.clientY;\n    const cx = (P2.clientX + P1.clientX) / 2;\n    const cy = (P2.clientY + P1.clientY) / 2;\n    const distance = Math.hypot(dx, dy);\n    const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n    const origin = [cx, cy];\n    return {\n      angle,\n      distance,\n      origin\n    };\n  } catch (_unused) {}\n  return null;\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = state.timeDelta = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n      V.addTo(state._distance, _absoluteDelta);\n    }\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        state.timeDelta = dt;\n      }\n    }\n  }\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n}\n\nfunction selectAxis([dx, dy], threshold) {\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n  return undefined;\n}\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault(value = false) {\n    return value;\n  },\n  triggerAllEvents(value = false) {\n    return value;\n  },\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n      case false:\n        return [0, 0];\n      default:\n        return V.toVector(value);\n    }\n  },\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n        return r;\n      };\n    }\n    return transform || identity;\n  },\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n      return NaN;\n    },\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n      return NaN;\n    },\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\n    return value;\n  },\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n    if ('current' in value) {\n      return () => value.current;\n    }\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (displacement, factor = 1) => [displacement * factor, 0],\n  ArrowLeft: (displacement, factor = 1) => [-1 * displacement * factor, 0],\n  ArrowUp: (displacement, factor = 1) => [0, -1 * displacement * factor],\n  ArrowDown: (displacement, factor = 1) => [0, displacement * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n  setup() {\n    const state = this.state;\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    const _values = pointerValues(event);\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n    this.emit();\n  }\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [_dx, _dy] = state._delta;\n      const [_mx, _my] = state._movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n      if (state.elapsedTime < sdt) {\n        const _vx = Math.abs(_dx / state.timeDelta);\n        const _vy = Math.abs(_dy / state.timeDelta);\n        if (_vx > svx && Math.abs(_mx) > sx) state.swipe[0] = Math.sign(_dx);\n        if (_vy > svy && Math.abs(_my) > sy) state.swipe[1] = Math.sign(_dy);\n      }\n    }\n    this.emit();\n  }\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n}\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1,\n      keys = true\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  },\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n  keyboardDisplacement(value = DEFAULT_KEYBOARD_DISPLACEMENT) {\n    return value;\n  }\n});\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n      return NaN;\n    },\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n      return NaN;\n    },\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'pinching');\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n    if (!state._active) return;\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && (Array.isArray(modifierKey) ? !modifierKey.find(k => event[k]) : !event[modifierKey])) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      bindFunction('lostPointerCapture', '', this[device + 'End'].bind(this));\n    }\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n  pinchOnWheel(value = true) {\n    return value;\n  }\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n","import { S as SUPPORT, C as ConfigResolverMap, _ as _objectSpread2, a as _defineProperty, t as toDomEventType, i as isTouch, b as touchIds, E as EngineMap, c as chain, p as parseProp, d as toHandlerProp } from './actions-fe213e88.esm.js';\nimport './maths-0ab39ae9.esm.js';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nconst sharedConfigResolver = {\n  target(value) {\n    if (value) {\n      return () => 'current' in value ? value.current : value;\n    }\n    return undefined;\n  },\n  enabled(value = true) {\n    return value;\n  },\n  window(value = SUPPORT.isBrowser ? window : undefined) {\n    return value;\n  },\n  eventOptions({\n    passive = true,\n    capture = false\n  } = {}) {\n    return {\n      passive,\n      capture\n    };\n  },\n  transform(value) {\n    return value;\n  }\n};\n\nconst _excluded = [\"target\", \"eventOptions\", \"window\", \"enabled\", \"transform\"];\nfunction resolveWith(config = {}, resolvers) {\n  const result = {};\n  for (const [key, resolver] of Object.entries(resolvers)) {\n    switch (typeof resolver) {\n      case 'function':\n        if (process.env.NODE_ENV === 'development') {\n          const r = resolver.call(result, config[key], key, config);\n          if (!Number.isNaN(r)) result[key] = r;\n        } else {\n          result[key] = resolver.call(result, config[key], key, config);\n        }\n        break;\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n  return result;\n}\nfunction parse(newConfig, gestureKey, _config = {}) {\n  const _ref = newConfig,\n    {\n      target,\n      eventOptions,\n      window,\n      enabled,\n      transform\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  _config.shared = resolveWith({\n    target,\n    eventOptions,\n    window,\n    enabled,\n    transform\n  }, sharedConfigResolver);\n  if (gestureKey) {\n    const resolver = ConfigResolverMap.get(gestureKey);\n    _config[gestureKey] = resolveWith(_objectSpread2({\n      shared: _config.shared\n    }, rest), resolver);\n  } else {\n    for (const key in rest) {\n      const resolver = ConfigResolverMap.get(key);\n      if (resolver) {\n        _config[key] = resolveWith(_objectSpread2({\n          shared: _config.shared\n        }, rest[key]), resolver);\n      } else if (process.env.NODE_ENV === 'development') {\n        if (!['drag', 'pinch', 'scroll', 'wheel', 'move', 'hover'].includes(key)) {\n          if (key === 'domTarget') {\n            throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n          }\n          console.warn(`[@use-gesture]: Unknown config key \\`${key}\\` was used. Please read the documentation for further information.`);\n        }\n      }\n    }\n  }\n  return _config;\n}\n\nclass EventStore {\n  constructor(ctrl, gestureKey) {\n    _defineProperty(this, \"_listeners\", new Set());\n    this._ctrl = ctrl;\n    this._gestureKey = gestureKey;\n  }\n  add(element, device, action, handler, options) {\n    const listeners = this._listeners;\n    const type = toDomEventType(device, action);\n    const _options = this._gestureKey ? this._ctrl.config[this._gestureKey].eventOptions : {};\n    const eventOptions = _objectSpread2(_objectSpread2({}, _options), options);\n    element.addEventListener(type, handler, eventOptions);\n    const remove = () => {\n      element.removeEventListener(type, handler, eventOptions);\n      listeners.delete(remove);\n    };\n    listeners.add(remove);\n    return remove;\n  }\n  clean() {\n    this._listeners.forEach(remove => remove());\n    this._listeners.clear();\n  }\n}\n\nclass TimeoutStore {\n  constructor() {\n    _defineProperty(this, \"_timeouts\", new Map());\n  }\n  add(key, callback, ms = 140, ...args) {\n    this.remove(key);\n    this._timeouts.set(key, window.setTimeout(callback, ms, ...args));\n  }\n  remove(key) {\n    const timeout = this._timeouts.get(key);\n    if (timeout) window.clearTimeout(timeout);\n  }\n  clean() {\n    this._timeouts.forEach(timeout => void window.clearTimeout(timeout));\n    this._timeouts.clear();\n  }\n}\n\nclass Controller {\n  constructor(handlers) {\n    _defineProperty(this, \"gestures\", new Set());\n    _defineProperty(this, \"_targetEventStore\", new EventStore(this));\n    _defineProperty(this, \"gestureEventStores\", {});\n    _defineProperty(this, \"gestureTimeoutStores\", {});\n    _defineProperty(this, \"handlers\", {});\n    _defineProperty(this, \"config\", {});\n    _defineProperty(this, \"pointerIds\", new Set());\n    _defineProperty(this, \"touchIds\", new Set());\n    _defineProperty(this, \"state\", {\n      shared: {\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }\n    });\n    resolveGestures(this, handlers);\n  }\n  setEventIds(event) {\n    if (isTouch(event)) {\n      this.touchIds = new Set(touchIds(event));\n      return this.touchIds;\n    } else if ('pointerId' in event) {\n      if (event.type === 'pointerup' || event.type === 'pointercancel') this.pointerIds.delete(event.pointerId);else if (event.type === 'pointerdown') this.pointerIds.add(event.pointerId);\n      return this.pointerIds;\n    }\n  }\n  applyHandlers(handlers, nativeHandlers) {\n    this.handlers = handlers;\n    this.nativeHandlers = nativeHandlers;\n  }\n  applyConfig(config, gestureKey) {\n    this.config = parse(config, gestureKey, this.config);\n  }\n  clean() {\n    this._targetEventStore.clean();\n    for (const key of this.gestures) {\n      this.gestureEventStores[key].clean();\n      this.gestureTimeoutStores[key].clean();\n    }\n  }\n  effect() {\n    if (this.config.shared.target) this.bind();\n    return () => this._targetEventStore.clean();\n  }\n  bind(...args) {\n    const sharedConfig = this.config.shared;\n    const props = {};\n    let target;\n    if (sharedConfig.target) {\n      target = sharedConfig.target();\n      if (!target) return;\n    }\n    if (sharedConfig.enabled) {\n      for (const gestureKey of this.gestures) {\n        const gestureConfig = this.config[gestureKey];\n        const bindFunction = bindToProps(props, gestureConfig.eventOptions, !!target);\n        if (gestureConfig.enabled) {\n          const Engine = EngineMap.get(gestureKey);\n          new Engine(this, args, gestureKey).bind(bindFunction);\n        }\n      }\n      const nativeBindFunction = bindToProps(props, sharedConfig.eventOptions, !!target);\n      for (const eventKey in this.nativeHandlers) {\n        nativeBindFunction(eventKey, '', event => this.nativeHandlers[eventKey](_objectSpread2(_objectSpread2({}, this.state.shared), {}, {\n          event,\n          args\n        })), undefined, true);\n      }\n    }\n    for (const handlerProp in props) {\n      props[handlerProp] = chain(...props[handlerProp]);\n    }\n    if (!target) return props;\n    for (const handlerProp in props) {\n      const {\n        device,\n        capture,\n        passive\n      } = parseProp(handlerProp);\n      this._targetEventStore.add(target, device, '', props[handlerProp], {\n        capture,\n        passive\n      });\n    }\n  }\n}\nfunction setupGesture(ctrl, gestureKey) {\n  ctrl.gestures.add(gestureKey);\n  ctrl.gestureEventStores[gestureKey] = new EventStore(ctrl, gestureKey);\n  ctrl.gestureTimeoutStores[gestureKey] = new TimeoutStore();\n}\nfunction resolveGestures(ctrl, internalHandlers) {\n  if (internalHandlers.drag) setupGesture(ctrl, 'drag');\n  if (internalHandlers.wheel) setupGesture(ctrl, 'wheel');\n  if (internalHandlers.scroll) setupGesture(ctrl, 'scroll');\n  if (internalHandlers.move) setupGesture(ctrl, 'move');\n  if (internalHandlers.pinch) setupGesture(ctrl, 'pinch');\n  if (internalHandlers.hover) setupGesture(ctrl, 'hover');\n}\nconst bindToProps = (props, eventOptions, withPassiveOption) => (device, action, handler, options = {}, isNative = false) => {\n  var _options$capture, _options$passive;\n  const capture = (_options$capture = options.capture) !== null && _options$capture !== void 0 ? _options$capture : eventOptions.capture;\n  const passive = (_options$passive = options.passive) !== null && _options$passive !== void 0 ? _options$passive : eventOptions.passive;\n  let handlerProp = isNative ? device : toHandlerProp(device, action, capture);\n  if (withPassiveOption && passive) handlerProp += 'Passive';\n  props[handlerProp] = props[handlerProp] || [];\n  props[handlerProp].push(handler);\n};\n\nconst RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\nfunction sortHandlers(_handlers) {\n  const native = {};\n  const handlers = {};\n  const actions = new Set();\n  for (let key in _handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handlers[key] = _handlers[key];\n    } else {\n      native[key] = _handlers[key];\n    }\n  }\n  return [handlers, native, actions];\n}\nfunction registerGesture(actions, handlers, handlerKey, key, internalHandlers, config) {\n  if (!actions.has(handlerKey)) return;\n  if (!EngineMap.has(key)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`[@use-gesture]: You've created a custom handler that that uses the \\`${key}\\` gesture but isn't properly configured.\\n\\nPlease add \\`${key}Action\\` when creating your handler.`);\n    }\n    return;\n  }\n  const startKey = handlerKey + 'Start';\n  const endKey = handlerKey + 'End';\n  const fn = state => {\n    let memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n  internalHandlers[key] = fn;\n  config[key] = config[key] || {};\n}\nfunction parseMergedHandlers(mergedHandlers, mergedConfig) {\n  const [handlers, nativeHandlers, actions] = sortHandlers(mergedHandlers);\n  const internalHandlers = {};\n  registerGesture(actions, handlers, 'onDrag', 'drag', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onWheel', 'wheel', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onScroll', 'scroll', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onPinch', 'pinch', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onMove', 'move', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onHover', 'hover', internalHandlers, mergedConfig);\n  return {\n    handlers: internalHandlers,\n    config: mergedConfig,\n    nativeHandlers\n  };\n}\n\nexport { Controller, parseMergedHandlers };\n","import { registerAction, dragAction, pinchAction, wheelAction, scrollAction, moveAction, hoverAction } from '@use-gesture/core/actions';\nexport * from '@use-gesture/core/actions';\nimport React from 'react';\nimport { Controller, parseMergedHandlers } from '@use-gesture/core';\nexport * from '@use-gesture/core/utils';\nexport * from '@use-gesture/core/types';\n\nfunction useRecognizers(handlers, config = {}, gestureKey, nativeHandlers) {\n  const ctrl = React.useMemo(() => new Controller(handlers), []);\n  ctrl.applyHandlers(handlers, nativeHandlers);\n  ctrl.applyConfig(config, gestureKey);\n  React.useEffect(ctrl.effect.bind(ctrl));\n  React.useEffect(() => {\n    return ctrl.clean.bind(ctrl);\n  }, []);\n  if (config.target === undefined) {\n    return ctrl.bind.bind(ctrl);\n  }\n  return undefined;\n}\n\nfunction useDrag(handler, config) {\n  registerAction(dragAction);\n  return useRecognizers({\n    drag: handler\n  }, config || {}, 'drag');\n}\n\nfunction usePinch(handler, config) {\n  registerAction(pinchAction);\n  return useRecognizers({\n    pinch: handler\n  }, config || {}, 'pinch');\n}\n\nfunction useWheel(handler, config) {\n  registerAction(wheelAction);\n  return useRecognizers({\n    wheel: handler\n  }, config || {}, 'wheel');\n}\n\nfunction useScroll(handler, config) {\n  registerAction(scrollAction);\n  return useRecognizers({\n    scroll: handler\n  }, config || {}, 'scroll');\n}\n\nfunction useMove(handler, config) {\n  registerAction(moveAction);\n  return useRecognizers({\n    move: handler\n  }, config || {}, 'move');\n}\n\nfunction useHover(handler, config) {\n  registerAction(hoverAction);\n  return useRecognizers({\n    hover: handler\n  }, config || {}, 'hover');\n}\n\nfunction createUseGesture(actions) {\n  actions.forEach(registerAction);\n  return function useGesture(_handlers, _config) {\n    const {\n      handlers,\n      nativeHandlers,\n      config\n    } = parseMergedHandlers(_handlers, _config || {});\n    return useRecognizers(handlers, config, undefined, nativeHandlers);\n  };\n}\n\nfunction useGesture(handlers, config) {\n  const hook = createUseGesture([dragAction, pinchAction, scrollAction, wheelAction, moveAction, hoverAction]);\n  return hook(handlers, config || {});\n}\n\nexport { createUseGesture, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };\n","class ElasticCollision{constructor({gridSize:i=4,containerOffsets:t={top:0,bottom:0,left:0,right:0},collisions:s=!0,borders:o=\"rigid\"}={}){this.calculatecCollisions=s,this.calculateBorders=o,this.gridSize=i,this.containerOffsets=t,this.positions=[],this.velocities=[],this.externalForces=[],this.dimensions=[],this.bounced=[],this.hash=[],this.container={},this.collisionsList=[]}initialConditions(i,t,s=()=>{}){this.container=t,this.dimensions=i.map(((i,t)=>{if(!i)return[0,0];this.externalForces[t]=[0,0],this.bounced[t]=0;const{rect:s}=i;return[s.width/2,s.height/2]})),s(this),this.positions.forEach(((t,s)=>{this.hash[s]=Math.floor(this.gridSize*(t[0]/this.container.width))+Math.floor(this.gridSize*(t[1]/this.container.height))*this.gridSize,this.setPosition(i[s]?.element,{x:t[0],y:t[1]})}))}polarCoordinates(i){return{speed:Math.sqrt(i[0]*i[0]+i[1]*i[1]),angle:Math.atan2(i[1],i[0])}}cartesianCoordinates(i,t){return[i*Math.cos(t),i*Math.sin(t)]}hasBounced(i){return this.bounced[i]+=1}setPosition(i,{x:t=0,y:s=0,z:o=0}){i&&(i.style.cssText=`transform: translate3d(${t}px, ${s}px, ${o}px);`)}rigidBorders(i){if(\"rigid\"!==this.calculateBorders)return;const t=this.containerOffsets.top,s=this.containerOffsets.left,o=this.containerOffsets.right+1,e=this.containerOffsets.bottom+1;for(let h=0;h<i.length;h++){const i=this.dimensions[h];let n=this.velocities[h],r=this.positions[h];r[1]<i[1]+this.container.height*t&&(this.hasBounced(h),this.velocities[h][1]=-n[1],this.positions[h][1]=i[1]+this.container.height*t),r[0]<i[0]+this.container.width*s&&(this.hasBounced(h),this.velocities[h][0]=-n[0],this.positions[h][0]=i[0]+this.container.width*s),r[1]>this.container.height*e-i[1]&&(this.hasBounced(h),this.velocities[h][1]=-n[1],this.positions[h][1]=this.container.height*e-i[1]),r[0]>this.container.width*o-i[0]&&(this.hasBounced(h),this.velocities[h][0]=-n[0],this.positions[h][0]=this.container.width*o-i[0])}}periodicBorders(i){if(\"periodic\"!==this.calculateBorders)return;const t=this.containerOffsets.top,s=this.containerOffsets.left,o=this.containerOffsets.right+1,e=this.containerOffsets.bottom+1;for(let h=0;h<i.length;h++){const i=this.dimensions[h];let n=this.positions[h],r=this.velocities[h].map((i=>Math.sign(i)));-1===r[1]&&n[1]<i[1]+this.container.height*t&&(this.positions[h][1]=i[1]+this.container.height*e),1===r[1]&&n[1]>this.container.height*e-i[1]&&(this.positions[h][1]=this.container.height*t-i[1]),-1===r[0]&&n[0]<i[0]+this.container.width*s&&(this.positions[h][0]=i[0]+this.container.width*o),1===r[0]&&n[0]>this.container.width*o-i[0]&&(this.positions[h][0]=this.container.width*s-i[0])}}isNeighboor(i,t){const s=this.hash[t];let o=this.hash[i],e=!1;for(let i=-1;i<2;i++)for(let t=-1;t<2;t++){let h=o+this.gridSize*i+t;if(!(h<0||h>this.gridSize*this.gridSize)&&h===s){e=!0;break}}return e}axisAlignedBoundaryBoxes(i,t){const s=this.dimensions[i],o=this.positions[i],e=this.dimensions[t],h=this.positions[t];return o.map(((i,t)=>Math.abs(i-h[t])<s[t]+e[t])).every((i=>i))}calculateSuperposition(i,t){const s=this.positions[i],o=this.dimensions[i],e=this.positions[t],h=this.dimensions[t],n=s.map(((i,t)=>o[t]+h[t]-Math.abs(i-e[t]))),r=s.map(((i,t)=>-Math.sign(i-e[t])));return n.map(((i,t)=>r[t]*Math.max(1/i,.1)))}collisions(i){if(this.calculatecCollisions){this.collisionsList=[];for(let t=0;t<i.length;t++){let i=this.velocities[t];this.hash.forEach(((s,o)=>{if(o===t)return;let e=this.velocities[o];if(this.collisionsList.some((({loop:i,inHash:s})=>i===o&&s===t)))return;if(!this.isNeighboor(t,o))return;if(!this.axisAlignedBoundaryBoxes(t,o))return;this.collisionsList.push({loop:t,inHash:o});const h=.5*(i.reduce(((i,t)=>i+t*t),0)+e.reduce(((i,t)=>i+t*t),0));let n=this.calculateSuperposition(t,o),r=i.map(((i,t)=>i+n[t])),a=e.map(((i,t)=>i-n[t]));const c=.5*(r.reduce(((i,t)=>i+t*t),0)+a.reduce(((i,t)=>i+t*t),0));if(0!==c){const i=Math.sqrt(h/c);r=r.map((t=>t*i)),a=a.map((t=>t*i))}this.velocities[t]=a,this.velocities[o]=r}))}}}update(i,t){this.rigidBorders(i),this.periodicBorders(i),this.collisions(i),t(this),this.positions.forEach(((i,t)=>{this.hash[t]=Math.floor(this.gridSize*i[0]/this.container.width)+Math.floor(this.gridSize*i[1]/this.container.height)*this.gridSize}))}}export{ElasticCollision as default};\n//# sourceMappingURL=elastic-collisions.mjs.map\n","function randomInitialConditions({ boxes, positions, velocities, container }) {\n  boxes.forEach((_, index) => {\n    positions[index] = [\n      Math.random() * container.width,\n      Math.random() * container.height,\n    ]\n    velocities[index] = [\n      0.5 * (Math.random() - 0.5),\n      0.5 * (Math.random() - 0.5),\n    ]\n  })\n}\n\nexport const initalConditionsPresets = {\n  random: randomInitialConditions,\n}\n\nfunction dvdAnimation({ boxes, positions, velocities, deltaTime }) {\n  boxes.forEach((_, index) => {\n    positions[index] = positions[index].map(\n      (pos, i) => pos + velocities[index][i] * deltaTime,\n    )\n  })\n}\n\nfunction DragAndGravity({\n  boxes,\n  positions,\n  velocities,\n  deltaTime,\n  externalForces,\n}) {\n  boxes.forEach((_, index) => {\n    let velocity = velocities[index]\n    let position = positions[index]\n    let draggin = externalForces[index]\n    const flow = [0, -0.1]\n\n    velocity = velocity.map(\n      (v, i) => v + deltaTime * -0.001 * (v - 4 * draggin[i] + flow[i]),\n    )\n\n    position = position.map((pos, i) => pos + velocity[i] * deltaTime)\n\n    positions[index] = position\n    velocities[index] = velocity\n\n    externalForces[index] = [0, 0]\n  })\n}\n\nfunction rightFlow({\n  boxes,\n  positions,\n  velocities,\n  externalForces,\n  deltaTime,\n}) {\n  boxes.forEach((_, index) => {\n    let velocity = velocities[index]\n    let position = positions[index]\n    let draggin = externalForces[index]\n    const flow = [0.5 * (Math.random() - 0.5), 0.05 * (Math.random() - 0.5)]\n\n    velocity = velocity.map(\n      (v, i) => v + deltaTime * -0.001 * (v - 4 * draggin[i] + flow[i]),\n    )\n\n    positions[index] = position = position.map(\n      (pos, i) => pos + velocity[i] * deltaTime,\n    )\n\n    positions[index] = position\n    velocities[index] = velocity\n\n    externalForces[index] = [0, 0]\n  })\n}\n\nexport const updatePresets = {\n  dvdAnimation,\n  DragAndGravity,\n  rightFlow,\n}\n\nfunction dragForce(newDir, externalForces, index) {\n  let norm = newDir.map((pos) => pos * pos).reduce((a, b) => a + b)\n  norm = Math.sqrt(norm)\n\n  if (norm === 0) return\n  externalForces[index] = newDir.map((pos) => pos / norm)\n}\n\nexport const dragForcePresetsLib = {\n  default: dragForce,\n}\n","import { useFrame, useRect } from '@darkroom.engineering/hamo'\nimport { useDrag } from '@use-gesture/react'\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport ElasticCollision from '../../engine/dist/elastic-collisions.mjs'\nimport {\n  dragForcePresetsLib,\n  initalConditionsPresets,\n  updatePresets,\n} from './presets'\nimport { isEmptyArray } from './utils'\n\nconst ElasticCollisionContext = createContext({})\n\nfunction useElasticCollision() {\n  return useContext(ElasticCollisionContext)\n}\n\nfunction ReactElasticCollision({\n  children,\n  className,\n  config = {\n    gridSize: 8,\n    collisions: true,\n    borders: 'rigid',\n    containerOffsets: {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    },\n  },\n  initialConditions = () => {},\n  update = () => {},\n}) {\n  const boxesRefs = useRef(new Map())\n  const [sectionRectRef, sectionRect] = useRect()\n  const [elasticCollision] = useState(() => new ElasticCollision(config))\n\n  const addBox = useCallback((element, slide) => {\n    boxesRefs.current.set(element, slide)\n  }, [])\n  const removeBox = useCallback((element) => {\n    boxesRefs.current.delete(element)\n  }, [])\n\n  useEffect(() => {\n    const boxes = [...boxesRefs.current.values()]\n\n    if (isEmptyArray(boxes) || boxes.some(({ rect }) => !rect)) return\n\n    elasticCollision.initialConditions(boxes, sectionRect, (instances) =>\n      initialConditions({ boxes, ...instances }),\n    )\n  }, [elasticCollision, sectionRect])\n\n  useFrame((_, deltaTime) => {\n    const boxes = [...boxesRefs.current.values()]\n\n    elasticCollision.update(boxes, (instance) => {\n      update({ boxes, ...instance, deltaTime })\n\n      boxes.forEach((element, index) => {\n        const position = instance.positions[index]\n        const dimensions = instance.dimensions[index]\n\n        instance?.setPosition(element?.element, {\n          // shift centers element to center of mass\n          x: position[0] - dimensions[0],\n          y: position[1],\n        })\n      })\n    })\n  })\n\n  return (\n    <div\n      className={className}\n      ref={sectionRectRef}\n      style={{ position: 'relative', width: '100%', height: '100%' }}\n    >\n      <ElasticCollisionContext.Provider\n        value={{ addBox, removeBox, elasticCollision }}\n      >\n        {children}\n      </ElasticCollisionContext.Provider>\n    </div>\n  )\n}\n\nfunction CollisionBox({\n  className,\n  children,\n  onDragStop = null,\n  index = 0,\n  ...props\n}) {\n  const { addBox, removeBox, elasticCollision } = useElasticCollision()\n  const [setRectRef, rect] = useRect()\n  const elementRef = useRef()\n\n  useEffect(() => {\n    if (elementRef.current) {\n      addBox(elementRef.current, {\n        element: elementRef.current,\n        rect,\n      })\n\n      return () => {\n        removeBox(elementRef.current)\n      }\n    }\n  }, [rect, addBox, removeBox])\n\n  const bind = useDrag(({ down, movement: [mx, my] }) => {\n    if (down && onDragStop) {\n      onDragStop([mx, my], elasticCollision.externalForces, index)\n    }\n  })\n\n  return (\n    <div\n      ref={(node) => {\n        elementRef.current = node\n        setRectRef(node)\n      }}\n      className={className}\n      {...props}\n    >\n      <div {...bind()}>{children}</div>\n    </div>\n  )\n}\n\nexport default ReactElasticCollision\nexport {\n  CollisionBox,\n  dragForcePresetsLib,\n  initalConditionsPresets,\n  updatePresets,\n  useElasticCollision,\n}\n","export function isEmptyArray(arr) {\n  if (!arr) return true\n\n  return Array.isArray(arr) && arr.length === 0\n}\n"],"names":["a","window","constructor","this","raf","requestAnimationFrame","t","now","s","callbacks","length","callback","performance","add","push","priority","sort","remove","filter","functionDebounce","debounce","fn","wait","callFirst","timeout","debouncedFn","clear","clearTimeout","debounceWrapper","apply","arguments","context","args","callNow","setTimeout","call","cancel","flush","p","Object","assign","bind","e","n","r","prototype","hasOwnProperty","w","getComputedStyle","position","style","setProperty","dataset","sticky","offsetParent","b","removeProperty","parentNode","y","offsetTop","z","offsetLeft","E","scrollTop","scrollY","L","scrollLeft","scrollX","P","emit","event","i","events","on","cb","k","ignoreTransform","ignoreSticky","c","u","lazy","d","l","f","o","h","m","v","top","left","width","height","element","current","x","bottom","right","getBoundingClientRect","borderBoxSize","inlineSize","blockSize","ResizeObserver","observe","disconnect","g","document","body","O","resize","N","V","toVector","fallback","undefined","Array","isArray","v1","v2","sub","addTo","subTo","rubberband","distance","dimension","constant","Math","abs","Infinity","pow","rubberbandIfOutOfBounds","min","max","clamp","_toPropertyKey","arg","key","_toPrimitive","input","hint","prim","Symbol","toPrimitive","res","TypeError","String","Number","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","ownKeys","keys","getOwnPropertySymbols","getOwnPropertyDescriptor","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","actionsWithoutCaptureSupported","toHandlerProp","device","action","capture","deviceProps","actionKey","hasCapture","includes","pointerCaptureEvents","parseProp","prop","eventKey","substring","toLowerCase","passive","indexOf","replace","captureKey","isTouch","getPointerType","pointerType","getValueEvent","getTouchList","type","changedTouches","targetTouches","touchIds","getCurrentTargetTouchList","from","touches","_event$currentTarget","_event$currentTarget$","target","currentTarget","contains","map","identifier","pointerId","valueEvent","pointerValues","clientX","clientY","noop","chain","fns","result","assignDefault","Engine","ctrl","state","computeValues","computeInitial","init","reset","shared","eventStore","gestureEventStores","timeoutStore","gestureTimeoutStores","config","sharedConfig","handler","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_direction","_delta","_bounds","axis","memo","elapsedTime","timeDelta","direction","overflow","_movementBound","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","compute","dt","preventDefault","cancelable","pointerIds","size","locked","pointerLockElement","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","down","pressed","_absoluteDelta","axisIntent","_m0","_m1","t0","t1","threshold","hasCustomTransform","sign","v0","restrictToAxis","previousOffset","gestureIsActive","first","last","bounds","setup","computeOffset","ox","oy","x0","x1","y0","y1","computeRubberband","Vx","Vy","Rx","Ry","X0","X1","Y0","Y1","computeMovement","absoluteDelta","clean","triggerAllEvents","aliasKey","CoordinatesEngine","super","axisThreshold","selectAxis","dx","dy","absDx","absDy","lockDirection","identity","commonConfigResolver","enabled","eventOptions","_k","process","env","NODE_ENV","originalTransform","isFinite","console","warn","domTarget","Error","NaN","coordinatesConfigResolver","_v","HTMLElement","KEYS_DELTA_MAP","ArrowRight","displacement","factor","ArrowLeft","ArrowUp","ArrowDown","isBrowser","createElement","supportsTouchEvents","SUPPORT","supportsGestureEvents","GestureEvent","touchscreen","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","pointerLock","supportsPointerLock","DEFAULT_DRAG_AXIS_THRESHOLD","pen","dragConfigResolver","lock","preventScrollAxis","preventScroll","preventScrollDelay","pointerCapture","pointerButtons","filterTaps","tapsThreshold","swipe","duration","delay","keyboardDisplacement","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","scaleBounds","angleBounds","_scaleBounds","D","_angleBounds","A","modifierKey","pinchOnWheel","mouseOnly","EngineMap","Map","ConfigResolverMap","dragAction","engine","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","tap","canceled","boundRect","targetRect","setActive","pointerClean","pointerDown","ctrlIds","setEventIds","setPointerCapture","setupPointer","setupScrollPrevention","setupDelayTrigger","startPointerDrag","pointerMove","id","movementX","movementY","pointerUp","hasPointerCapture","releasePointerCapture","_unused","_dx","_dy","_mx","_my","svx","svy","sx","sy","sdt","_vx","_vy","pointerClick","detail","stopPropagation","sourceEvent","touchAction","_unused2","requestPointerLock","exitPointerLock","persistEvent","persist","keyDown","deltaFn","keyUp","bindFunction","resolver","_objectWithoutProperties","source","excluded","_objectWithoutPropertiesLoose","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","sharedConfigResolver","_excluded","resolveWith","resolvers","entries","isNaN","EventStore","gestureKey","Set","_ctrl","_gestureKey","options","listeners","_listeners","toDomEventType","addEventListener","removeEventListener","delete","TimeoutStore","ms","_timeouts","set","get","Controller","resolveGestures","internalHandlers","drag","setupGesture","wheel","scroll","move","pinch","hover","applyHandlers","nativeHandlers","applyConfig","parse","newConfig","_config","_ref","rest","_targetEventStore","gestures","effect","props","gestureConfig","bindToProps","nativeBindFunction","handlerProp","withPassiveOption","isNative","_options$capture","_options$passive","useDrag","registerAction","useRecognizers","React","useMemo","useEffect","ElasticCollision","gridSize","containerOffsets","collisions","borders","calculatecCollisions","calculateBorders","positions","velocities","externalForces","dimensions","bounced","hash","container","collisionsList","initialConditions","rect","floor","setPosition","polarCoordinates","speed","sqrt","angle","atan2","cartesianCoordinates","cos","sin","hasBounced","cssText","rigidBorders","periodicBorders","isNeighboor","axisAlignedBoundaryBoxes","every","calculateSuperposition","some","loop","inHash","reduce","update","initalConditionsPresets","random","randomInitialConditions","boxes","_","index","updatePresets","dvdAnimation","deltaTime","pos","DragAndGravity","draggin","flow","rightFlow","dragForcePresetsLib","default","dragForce","newDir","norm","ElasticCollisionContext","createContext","useElasticCollision","useContext","ReactElasticCollision","children","className","boxesRefs","useRef","sectionRectRef","sectionRect","useRect","elasticCollision","useState","addBox","useCallback","slide","removeBox","isEmptyArray","arr","instances","useFrame","instance","ref","Provider","CollisionBox","onDragStop","setRectRef","elementRef","mx","my","_extends","node"],"mappings":"gWAAA,IAAIA,EAAE,oBAAoBC,QAAQ,IAAI,MAAM,WAAAC,GAAcC,KAAKC,IAAIJ,IAAIK,sBAAsBF,KAAKC,KAAK,MAAME,EAAEN,EAAEG,KAAKI,IAAIJ,KAAKI,IAAIP,EAAE,IAAI,IAAIQ,EAAE,EAAEA,EAAEL,KAAKM,UAAUC,OAAOF,IAAIL,KAAKM,UAAUD,GAAGG,SAASX,EAAEM,IAAIH,KAAKM,UAAU,GAAGN,KAAKI,IAAIK,YAAYL,MAAMF,sBAAsBF,KAAKC,IAAI,CAAC,GAAAS,CAAIb,EAAEM,EAAE,GAAG,OAAOH,KAAKM,UAAUK,KAAK,CAACH,SAASX,EAAEe,SAAST,IAAIH,KAAKM,UAAUO,MAAK,CAAChB,EAAEM,IAAIN,EAAEe,SAAST,EAAES,WAAU,IAAIZ,KAAKc,OAAOjB,EAAE,CAAC,MAAAiB,CAAOjB,GAAGG,KAAKM,UAAUN,KAAKM,UAAUS,QAAO,EAAEP,SAASL,KAAKN,IAAIM,GAAE,GCAhea,EAEJ,SAASC,SAASC,EAAIC,EAAMC,GAC1B,IAAIC,EAAU,KACVC,EAAc,KAEdC,MAAQ,WACNF,IACFG,aAAaH,GAEbC,EAAc,KACdD,EAAU,KAEhB,EAWMI,gBAAkB,WACpB,IAAKN,EACH,OAAOD,EAAGQ,MAAM1B,KAAM2B,WAGxB,IAAIC,EAAU5B,KACV6B,EAAOF,UACPG,EAAUV,IAAcC,EAkB5B,OAjBAE,QAEAD,EAAc,WACZJ,EAAGQ,MAAME,EAASC,EACxB,EAEIR,EAAUU,YAAW,WAGnB,GAFAV,EAAU,MAELS,EAAS,CACZ,IAAIE,EAAOV,EAGX,OAFAA,EAAc,KAEPU,GACR,CACF,GAAEb,GAECW,EACKR,SADT,CAGJ,EAKE,OAHAG,gBAAgBQ,OAASV,MACzBE,gBAAgBS,MAxCJ,WACV,IAAIF,EAAOV,EACXC,QAEIS,GACFA,GAEN,EAmCSP,eACT,EC1D27D,SAASU,IAAI,OAAOA,EAAEC,OAAOC,OAAOD,OAAOC,OAAOC,OAAO,SAASC,GAAG,IAAI,IAAIpC,EAAE,EAAEA,EAAEwB,UAAUpB,OAAOJ,IAAI,CAAC,IAAIqC,EAAEb,UAAUxB,GAAG,IAAI,IAAIsC,KAAKD,EAAEJ,OAAOM,UAAUC,eAAeX,KAAKQ,EAAEC,KAAKF,EAAEE,GAAGD,EAAEC,GAAG,CAAC,OAAOF,CAAC,EAAEJ,EAAET,MAAM1B,KAAK2B,UAAU,CAAC,SAASiB,EAAEL,GAAG,WAAWM,iBAAiBN,GAAGO,WAAWP,EAAEQ,MAAMC,YAAY,WAAW,YAAYT,EAAEU,QAAQC,OAAO,QAAQX,EAAEY,cAAcP,EAAEL,EAAEY,aAAa,CAAC,SAASC,EAAEb,GAAG,IAAIpC,EAAE,UAAU,MAAMoC,GAAG,OAAOpC,EAAEoC,EAAEU,cAAS,EAAO9C,EAAE+C,UAAUX,EAAEQ,MAAMM,eAAe,mBAAmBd,EAAEU,QAAQC,QAAQX,EAAEe,YAAYF,EAAEb,EAAEe,WAAW,CAAC,SAASC,EAAEhB,EAAEpC,EAAE,GAAG,MAAMqC,EAAErC,EAAEoC,EAAEiB,UAAU,OAAOjB,EAAEY,aAAaI,EAAEhB,EAAEY,aAAaX,GAAGA,CAAC,CAAC,SAASiB,EAAElB,EAAEpC,EAAE,GAAG,MAAMqC,EAAErC,EAAEoC,EAAEmB,WAAW,OAAOnB,EAAEY,aAAaM,EAAElB,EAAEY,aAAaX,GAAGA,CAAC,CAAC,SAASmB,EAAEpB,EAAEpC,EAAE,GAAG,IAAIqC,EAAE,MAAMC,EAAEtC,GAAG,OAAOqC,EAAE,MAAMD,OAAE,EAAOA,EAAEqB,WAAWpB,EAAE,GAAG,OAAOD,EAAEe,WAAWK,EAAEpB,EAAEe,WAAWb,GAAGA,EAAE3C,OAAO+D,OAAO,CAAC,SAASC,EAAEvB,EAAEpC,EAAE,GAAG,IAAIqC,EAAE,MAAMC,EAAEtC,GAAG,OAAOqC,EAAE,MAAMD,OAAE,EAAOA,EAAEwB,YAAYvB,EAAE,GAAG,OAAOD,EAAEe,WAAWQ,EAAEvB,EAAEe,WAAWb,GAAGA,EAAE3C,OAAOkE,OAAO,CAAC,MAAMC,ECAx3F,CACnCC,IAAAA,CAAKC,KAAUtC,GACb,IACE,IAAIuC,EAAI,EACN9D,EAAYN,KAAKqE,OAAOF,IAAU,GAClC5D,EAASD,EAAUC,OACrB6D,EAAI7D,EACJ6D,IAEA9D,EAAU8D,MAAMvC,EAEnB,EACDwC,OAAQ,CAAE,EACVC,EAAAA,CAAGH,EAAOI,GAER,OADEvE,KAAKqE,OAAOF,KAAW,IAAIxD,KAAK4D,GAC3B,KACLvE,KAAKqE,OAAOF,GAASnE,KAAKqE,OAAOF,IAAQpD,QAAOqD,GAAKG,IAAOH,GAAE,CAElE,GDlBi6F,SAASI,GAAGC,gBAAgBhC,GAAE,EAAGiC,aAAaC,GAAE,EAAG1D,SAAS2D,EAAE,IAAIC,KAAKxE,GAAE,EAAGG,SAASsE,GAAG,CAAA,GAAI,MAAMC,EAAElF,GAAG2C,IAAIwC,EAAEC,EAAE,CAAA,IAAKC,EAAEC,GAAG3C,EAAE,CAAA,GAAI4C,EAAE7C,GAAE,EAAE8C,IAAI9C,EAAE+C,KAAKnF,EAAEoF,MAAM/C,EAAEgD,OAAO/C,EAAEgD,QAAQR,MAAM,IAAIN,EAAEP,EAAEQ,EAAEG,EAAElF,EAAE0C,EAAE,OAAOoC,EAAEpC,GAAGoC,EAAEK,EAAEU,QAAQL,IAAIlF,EAAE,OAAOiE,EAAEjE,GAAGiE,EAAEY,EAAEU,QAAQJ,KAAK9C,EAAE,OAAOoC,EAAEpC,GAAGoC,EAAEI,EAAEU,QAAQH,MAAM9C,EAAE,OAAOsC,EAAEtC,GAAGsC,EAAEC,EAAEU,QAAQF,OAAOP,EAAE,OAAOpF,EAAEoF,GAAGpF,EAAEmF,EAAEU,QAAQD,QAAQlD,IAAIyC,EAAEU,QAAQL,KAAKlF,IAAI6E,EAAEU,QAAQJ,MAAM9C,IAAIwC,EAAEU,QAAQH,OAAO9C,IAAIuC,EAAEU,QAAQF,QAAQP,IAAID,EAAEU,QAAQD,UAAUT,EAAEU,QAAQL,IAAI9C,EAAEyC,EAAEU,QAAQnC,EAAEhB,EAAEyC,EAAEU,QAAQH,MAAM/C,EAAEwC,EAAEU,QAAQF,OAAO/C,EAAEuC,EAAEU,QAAQJ,KAAKnF,EAAE6E,EAAEU,QAAQC,EAAExF,EAAE6E,EAAEU,QAAQE,OAAOrD,EAAEE,EAAEuC,EAAEU,QAAQG,MAAM1F,EAAEqC,EAAEwC,EAAEU,QAAQD,QAAQR,EAAE,MAAMH,GAAGA,EAAEE,EAAEU,SAASrF,GAAG8E,EAAEhD,EAAE,CAAE,EAAC6C,EAAEU,UAAS,GAAG,CAACrF,IAAIF,GAAE,KAAK,IAAI4E,EAAE,OAAO,MAAMxC,EAAEwC,EAAEe,wBAAwBV,EAAE,CAACG,MAAMhD,EAAEgD,MAAMC,OAAOjD,EAAEiD,SAAS,MAAMrF,EAAEiE,GAAE,EAAE7B,MAAM6C,EAAE,CAACG,MAAMhD,EAAEwD,cAAc,GAAGC,WAAWR,OAAOjD,EAAEwD,cAAc,GAAGE,WAAU,GAAGrB,GAAGpC,EAAE,IAAI0D,eAAe/F,GAAG,OAAOqC,EAAE2D,QAAQpB,GAAG,KAAKvC,EAAE4D,aAAajG,EAAE8B,QAAQ,CAAA,GAAG,CAAC8C,EAAEH,EAAEQ,IAAI,MAAMiB,EAAE7B,GAAGhC,IAAImD,EAAEpD,GAAE,KAAK,IAAIwC,EAAE,OAAO,IAAIxC,EAAEpC,EAAE,GAAGwE,GAAG/B,EAAEmC,GAAGtC,EAAEF,EAAEgB,EAAEwB,GAAG5E,EAAEsD,EAAEsB,OAAO,CAAC,MAAMvC,EAAEuC,EAAEe,wBAAwBvD,EAAEC,EAAE6C,IAAI1B,EAAEoB,GAAG5E,EAAEqC,EAAE8C,KAAKxB,EAAEiB,EAAE,CAACJ,GAAGvB,EAAE2B,GAAGK,EAAE,CAACC,IAAI9C,EAAE+C,KAAKnF,EAAEsF,QAAQV,GAAG,GAAE,CAACtC,EAAEkC,EAAEI,EAAEK,IAAIjF,GAAE,KAAKwF,IAAI,MAAMpD,EAAE6B,EAAEuB,EAAEf,GAAGzE,EAAE,IAAI+F,eAAe3D,GAAG,OAAOpC,EAAEgG,QAAQ,MAAME,EAAEA,EAAEC,SAASC,MAAM,KAAKpG,EAAEiG,aAAa7D,EAAEN,SAAQ,GAAG,CAACoE,EAAEzB,EAAEe,IAAI,MAAMa,EAAEjE,GAAE,KAAK,IAAIwC,EAAE,OAAO,MAAMxC,EAAEwC,EAAEe,wBAAwBV,EAAE,CAACG,MAAMhD,EAAEgD,MAAMC,OAAOjD,EAAEiD,SAASG,GAAC,GAAI,CAACZ,EAAEY,EAAEP,IAAIjF,GAAE,KAAK6E,EAAEU,QAAQe,OAAOD,EAAEnG,GAAG8E,EAAEhD,EAAE,GAAG6C,EAAEU,UAAUzB,EAAEK,GAAG,SAASkC,KAAI,CAACA,EAAEnG,IAAI,MAAMqG,EAAEnE,GAAE,IAAIyC,EAAEU,SAAQ,IAAI,MAAM,CAAC7F,EAAEQ,EAAEqG,EAAExB,EAAEV,EAAE,CAAs8BA,EAAEiC,OAAO,KAAKxC,EAAEC,KAAK,WEGh1K,MAAMyC,EAAI,CACRC,SAAQA,CAACxB,EAAGyB,UACAC,IAAN1B,IAAiBA,EAAIyB,GAClBE,MAAMC,QAAQ5B,GAAKA,EAAI,CAACA,EAAGA,IAEpC1E,IAAGA,CAACuG,EAAIC,IACC,CAACD,EAAG,GAAKC,EAAG,GAAID,EAAG,GAAKC,EAAG,IAEpCC,IAAGA,CAACF,EAAIC,IACC,CAACD,EAAG,GAAKC,EAAG,GAAID,EAAG,GAAKC,EAAG,IAEpCE,KAAAA,CAAMH,EAAIC,GACRD,EAAG,IAAMC,EAAG,GACZD,EAAG,IAAMC,EAAG,EACb,EACDG,KAAAA,CAAMJ,EAAIC,GACRD,EAAG,IAAMC,EAAG,GACZD,EAAG,IAAMC,EAAG,EACd,GAEF,SAASI,WAAWC,EAAUC,EAAWC,GACvC,OAAkB,IAAdD,GAAmBE,KAAKC,IAAIH,KAAeI,IAAiBF,KAAKG,IAAIN,EAAqB,EAAXE,GAC5EF,EAAWC,EAAYC,GAAYD,EAAYC,EAAWF,EACnE,CACA,SAASO,wBAAwBhF,EAAUiF,EAAKC,EAAKP,EAAW,KAC9D,OAAiB,IAAbA,EA5BN,SAASQ,MAAM7C,EAAG2C,EAAKC,GACrB,OAAON,KAAKM,IAAID,EAAKL,KAAKK,IAAI3C,EAAG4C,GACnC,CA0B6BC,CAAMnF,EAAUiF,EAAKC,GAC5ClF,EAAWiF,GAAaT,WAAWS,EAAMjF,EAAUkF,EAAMD,EAAKN,GAAYM,EAC1EjF,EAAWkF,GAAaV,WAAWxE,EAAWkF,EAAKA,EAAMD,EAAKN,GAAYO,EACvElF,CACT,CCnBA,SAASoF,eAAeC,GACtB,IAAIC,EAZN,SAASC,aAAaC,EAAOC,GAC3B,GAAqB,iBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EACxD,IAAIE,EAAOF,EAAMG,OAAOC,aACxB,QAAa5B,IAAT0B,EAAoB,CACtB,IAAIG,EAAMH,EAAKxG,KAAKsG,EAAOC,GAAQ,WACnC,GAAmB,iBAARI,EAAkB,OAAOA,EACpC,MAAM,IAAIC,UAAU,+CACtB,CACA,OAAiB,WAATL,EAAoBM,OAASC,QAAQR,EAC/C,CAGYD,CAAaF,EAAK,UAC5B,MAAsB,iBAARC,EAAmBA,EAAMS,OAAOT,EAChD,CAEA,SAASW,gBAAgBC,EAAKZ,EAAKa,GAYjC,OAXAb,EAAMF,eAAeE,MACVY,EACT5G,OAAO8G,eAAeF,EAAKZ,EAAK,CAC9Ba,MAAOA,EACPE,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZL,EAAIZ,GAAOa,EAEND,CACT,CAEA,SAASM,QAAQ/G,EAAGE,GAClB,IAAItC,EAAIiC,OAAOmH,KAAKhH,GACpB,GAAIH,OAAOoH,sBAAuB,CAChC,IAAIvE,EAAI7C,OAAOoH,sBAAsBjH,GACrCE,IAAMwC,EAAIA,EAAElE,QAAO,SAAU0B,GAC3B,OAAOL,OAAOqH,yBAAyBlH,EAAGE,GAAG0G,UAC/C,KAAKhJ,EAAEQ,KAAKe,MAAMvB,EAAG8E,EACvB,CACA,OAAO9E,CACT,CACA,SAASuJ,eAAenH,GACtB,IAAK,IAAIE,EAAI,EAAGA,EAAId,UAAUpB,OAAQkC,IAAK,CACzC,IAAItC,EAAI,MAAQwB,UAAUc,GAAKd,UAAUc,GAAK,GAC9CA,EAAI,EAAI6G,QAAQlH,OAAOjC,IAAI,GAAIwJ,SAAQ,SAAUlH,GAC/CsG,gBAAgBxG,EAAGE,EAAGtC,EAAEsC,GAC1B,IAAKL,OAAOwH,0BAA4BxH,OAAOyH,iBAAiBtH,EAAGH,OAAOwH,0BAA0BzJ,IAAMmJ,QAAQlH,OAAOjC,IAAIwJ,SAAQ,SAAUlH,GAC7IL,OAAO8G,eAAe3G,EAAGE,EAAGL,OAAOqH,yBAAyBtJ,EAAGsC,GACjE,GACF,CACA,OAAOF,CACT,CAEA,MAAMuH,EAAiB,CACrBC,QAAS,CACPC,MAAO,OACPC,OAAQ,OACRC,IAAK,MAEPC,MAAO,CACLH,MAAO,OACPC,OAAQ,OACRC,IAAK,MAEPE,MAAO,CACLJ,MAAO,QACPC,OAAQ,OACRC,IAAK,OAEPG,QAAS,CACPL,MAAO,QACPC,OAAQ,SACRC,IAAK,QAGT,SAASI,WAAWC,GAClB,OAAKA,EACEA,EAAO,GAAGC,cAAgBD,EAAOE,MAAM,GAD1B,EAEtB,CACA,MAAMC,EAAiC,CAAC,QAAS,SAIjD,SAASC,cAAcC,EAAQC,EAAS,GAAIC,GAAU,GACpD,MAAMC,EAAcjB,EAAec,GAC7BI,EAAYD,GAAcA,EAAYF,IAAoBA,EAChE,MAAO,KAAOP,WAAWM,GAAUN,WAAWU,IANhD,SAASC,WAAWH,GAAU,EAAOE,GACnC,OAAOF,IAAYJ,EAA+BQ,SAASF,EAC7D,CAI8DC,CAAWH,EAASE,GAAa,UAAY,GAC3G,CACA,MAAMG,EAAuB,CAAC,oBAAqB,sBACnD,SAASC,UAAUC,GACjB,IAAIC,EAAWD,EAAKE,UAAU,GAAGC,cACjC,MAAMC,KAAaH,EAASI,QAAQ,WAChCD,IAASH,EAAWA,EAASK,QAAQ,UAAW,KACpD,MAAMC,EAAaT,EAAqBD,SAASI,GAAY,iBAAmB,UAC1ER,KAAaQ,EAASI,QAAQE,GAEpC,OADId,IAASQ,EAAWA,EAASK,QAAQ,UAAW,KAC7C,CACLf,OAAQU,EACRR,UACAW,UAEJ,CAMA,SAASI,QAAQ1H,GACf,MAAO,YAAaA,CACtB,CACA,SAAS2H,eAAe3H,GACtB,OAAI0H,QAAQ1H,GAAe,QACvB,gBAAiBA,EAAcA,EAAM4H,YAClC,OACT,CAUA,SAASC,cAAc7H,GACrB,OAAO0H,QAAQ1H,GAJjB,SAAS8H,aAAa9H,GACpB,MAAsB,aAAfA,EAAM+H,MAAsC,gBAAf/H,EAAM+H,KAAyB/H,EAAMgI,eAAiBhI,EAAMiI,aAClG,CAE0BH,CAAa9H,GAAO,GAAKA,CACnD,CAkBA,SAASkI,SAASlI,GAChB,OA9BF,SAASmI,0BAA0BnI,GACjC,OAAO4C,MAAMwF,KAAKpI,EAAMqI,SAASzL,QAAOwB,IACtC,IAAIkK,EAAsBC,EAC1B,OAAOnK,EAAEoK,SAAWxI,EAAMyI,gBAAmE,QAAhDH,EAAuBtI,EAAMyI,qBAAoD,IAAzBH,GAA+F,QAA3DC,EAAwBD,EAAqBI,gBAAgD,IAA1BH,OAAmC,EAASA,EAAsB1K,KAAKyK,EAAsBlK,EAAEoK,QAAQ,GAEvT,CAyBSL,CAA0BnI,GAAO2I,KAAI1C,GAASA,EAAM2C,YAC7D,CAKA,SAASC,UAAU7I,GACjB,MAAM8I,EAAajB,cAAc7H,GACjC,OAAO0H,QAAQ1H,GAAS8I,EAAWF,WAAaE,EAAWD,SAC7D,CACA,SAASE,cAAc/I,GACrB,MAAM8I,EAAajB,cAAc7H,GACjC,MAAO,CAAC8I,EAAWE,QAASF,EAAWG,QACzC,CAgDA,SAASpL,KAAKoD,KAAMvD,GAClB,MAAiB,mBAANuD,EACFA,KAAKvD,GAELuD,CAEX,CACA,SAASiI,OAAQ,CACjB,SAASC,SAASC,GAChB,OAAmB,IAAfA,EAAIhN,OAAqB8M,KACV,IAAfE,EAAIhN,OAAqBgN,EAAI,GAC1B,WACL,IAAIC,EACJ,IAAK,MAAMtM,KAAMqM,EACfC,EAAStM,EAAGQ,MAAM1B,KAAM2B,YAAc6L,EAExC,OAAOA,EAEX,CACA,SAASC,cAAcxE,EAAOpC,GAC5B,OAAOzE,OAAOC,OAAO,CAAA,EAAIwE,EAAUoC,GAAS,CAAA,EAC9C,CAGA,MAAMyE,OACJ3N,WAAAA,CAAY4N,EAAM9L,EAAMuG,GACtBpI,KAAK2N,KAAOA,EACZ3N,KAAK6B,KAAOA,EACZ7B,KAAKoI,IAAMA,EACNpI,KAAK4N,QACR5N,KAAK4N,MAAQ,GACb5N,KAAK6N,cAAc,CAAC,EAAG,IACvB7N,KAAK8N,iBACD9N,KAAK+N,MAAM/N,KAAK+N,OACpB/N,KAAKgO,QAET,CACA,SAAIJ,GACF,OAAO5N,KAAK2N,KAAKC,MAAM5N,KAAKoI,IAC9B,CACA,SAAIwF,CAAMA,GACR5N,KAAK2N,KAAKC,MAAM5N,KAAKoI,KAAOwF,CAC9B,CACA,UAAIK,GACF,OAAOjO,KAAK2N,KAAKC,MAAMK,MACzB,CACA,cAAIC,GACF,OAAOlO,KAAK2N,KAAKQ,mBAAmBnO,KAAKoI,IAC3C,CACA,gBAAIgG,GACF,OAAOpO,KAAK2N,KAAKU,qBAAqBrO,KAAKoI,IAC7C,CACA,UAAIkG,GACF,OAAOtO,KAAK2N,KAAKW,OAAOtO,KAAKoI,IAC/B,CACA,gBAAImG,GACF,OAAOvO,KAAK2N,KAAKW,OAAOL,MAC1B,CACA,WAAIO,GACF,OAAOxO,KAAK2N,KAAKc,SAASzO,KAAKoI,IACjC,CACA4F,KAAAA,GACE,MAAMJ,MACJA,EAAKK,OACLA,EAAMS,OACNA,EAAM7M,KACNA,GACE7B,KACJiO,EAAOS,GAAUd,EAAMe,QAAUf,EAAMgB,OAAShB,EAAMiB,SAAWjB,EAAMkB,QAAS,EAChFlB,EAAMmB,MAAQ,EAAC,GAAO,GACtBnB,EAAMoB,aAAc,EACpBpB,EAAMqB,UAAY,CAAC,EAAG,GACtBrB,EAAMsB,UAAY,CAAC,EAAG,GACtBtB,EAAMuB,WAAa,CAAC,EAAG,GACvBvB,EAAMwB,OAAS,CAAC,EAAG,GACnBxB,EAAMyB,QAAU,CAAC,EAAEzH,IAAUA,KAAW,EAAEA,IAAUA,MACpDgG,EAAM/L,KAAOA,EACb+L,EAAM0B,UAAOxI,EACb8G,EAAM2B,UAAOzI,EACb8G,EAAM4B,YAAc5B,EAAM6B,UAAY,EACtC7B,EAAM8B,UAAY,CAAC,EAAG,GACtB9B,EAAMrG,SAAW,CAAC,EAAG,GACrBqG,EAAM+B,SAAW,CAAC,EAAG,GACrB/B,EAAMgC,eAAiB,EAAC,GAAO,GAC/BhC,EAAMiC,SAAW,CAAC,EAAG,GACrBjC,EAAMkC,SAAW,CAAC,EAAG,GACrBlC,EAAMmC,MAAQ,CAAC,EAAG,GAClBnC,EAAMoC,UAAY,CACpB,CACAhG,KAAAA,CAAM7F,GACJ,MAAMyJ,EAAQ5N,KAAK4N,MACbU,EAAStO,KAAKsO,OACfV,EAAMe,UACT3O,KAAKgO,QACLhO,KAAK8N,iBACLF,EAAMe,SAAU,EAChBf,EAAMjB,OAASxI,EAAMwI,OACrBiB,EAAMhB,cAAgBzI,EAAMyI,cAC5BgB,EAAMqC,WAAa3B,EAAO/B,KAAOvK,KAAKsM,EAAO/B,KAAMqB,GAASA,EAAMsC,OAClEtC,EAAMsC,OAAStC,EAAMqC,WACrBrC,EAAMuC,UAAYvC,EAAMoC,UAAY7L,EAAM6L,UAE9C,CACAnC,aAAAA,CAAcuC,GACZ,MAAMxC,EAAQ5N,KAAK4N,MACnBA,EAAMyC,QAAUD,EAChBxC,EAAMwC,OAASpQ,KAAKsO,OAAOgC,UAAUF,EACvC,CACAtC,cAAAA,GACE,MAAMF,EAAQ5N,KAAK4N,MACnBA,EAAM2C,SAAW3C,EAAMyC,QACvBzC,EAAM4C,QAAU5C,EAAMwC,MACxB,CACAK,OAAAA,CAAQtM,GACN,MAAMyJ,MACJA,EAAKU,OACLA,EAAML,OACNA,GACEjO,KACJ4N,EAAM/L,KAAO7B,KAAK6B,KAClB,IAAI6O,EAAK,EAaT,GAZIvM,IACFyJ,EAAMzJ,MAAQA,EACVmK,EAAOqC,gBAAkBxM,EAAMyM,YAAYhD,EAAMzJ,MAAMwM,iBAC3D/C,EAAM1B,KAAO/H,EAAM+H,KACnB+B,EAAOzB,QAAUxM,KAAK2N,KAAKkD,WAAWC,MAAQ9Q,KAAK2N,KAAKtB,SAASyE,KACjE7C,EAAO8C,SAAWzK,SAAS0K,mBAC3B5O,OAAOC,OAAO4L,EAnJpB,SAASgD,gBAAgB9M,GACvB,MAAM+M,EAAU,CAAA,EAEhB,GADI,YAAa/M,IAAO+M,EAAQC,QAAUhN,EAAMgN,SAC5C,aAAchN,EAAO,CACvB,MAAMiN,SACJA,EAAQC,OACRA,EAAMC,QACNA,EAAOC,QACPA,GACEpN,EACJ/B,OAAOC,OAAO6O,EAAS,CACrBE,WACAC,SACAC,UACAC,WAEJ,CACA,OAAOL,CACT,CAiI4BD,CAAgB9M,IACtC8J,EAAOuD,KAAOvD,EAAOwD,QAAUxD,EAAOkD,QAAU,GAAM,GAAKlD,EAAOzB,QAAU,EAC5EkE,EAAKvM,EAAM6L,UAAYpC,EAAMoC,UAC7BpC,EAAMoC,UAAY7L,EAAM6L,UACxBpC,EAAM4B,YAAc5B,EAAMoC,UAAYpC,EAAMuC,WAE1CvC,EAAMe,QAAS,CACjB,MAAM+C,EAAiB9D,EAAMwB,OAAOtC,IAAIpF,KAAKC,KAC7ChB,EAAES,MAAMwG,EAAMsB,UAAWwC,EAC3B,CACI1R,KAAK2R,YAAY3R,KAAK2R,WAAWxN,GACrC,MAAOyN,EAAKC,GAAOjE,EAAMqB,WAClB6C,EAAIC,GAAMzD,EAAO0D,WAClBjD,MACJA,EAAKqB,OACLA,GACExC,EASJ,GARIU,EAAO2D,qBACQ,IAAblD,EAAM,KAAcA,EAAM,GAAKrH,KAAKC,IAAIiK,IAAQE,GAAM1B,EAAO,KAChD,IAAbrB,EAAM,KAAcA,EAAM,GAAKrH,KAAKC,IAAIkK,IAAQE,GAAM3B,EAAO,OAEhD,IAAbrB,EAAM,KAAcA,EAAM,GAAKrH,KAAKC,IAAIiK,IAAQE,GAAMpK,KAAKwK,KAAKN,GAAOE,IAC1D,IAAb/C,EAAM,KAAcA,EAAM,GAAKrH,KAAKC,IAAIkK,IAAQE,GAAMrK,KAAKwK,KAAKL,GAAOE,IAE7EnE,EAAMoB,aAA2B,IAAbD,EAAM,KAA6B,IAAbA,EAAM,IAC3CnB,EAAMoB,YAAa,OACxB,MAAMc,EAAW,CAAC,EAAG,GACrB,GAAIxB,EAAO2D,mBAAoB,CAC7B,MAAOE,EAAIlL,GAAMmJ,EACjBN,EAAS,IAAkB,IAAbf,EAAM,GAAeoD,EAAKpD,EAAM,GAAK,EACnDe,EAAS,IAAkB,IAAbf,EAAM,GAAe9H,EAAK8H,EAAM,GAAK,CACrD,MACEe,EAAS,IAAkB,IAAbf,EAAM,GAAe6C,EAAM7C,EAAM,GAAK,EACpDe,EAAS,IAAkB,IAAbf,EAAM,GAAe8C,EAAM9C,EAAM,GAAK,EAElD/O,KAAKoS,iBAAmBxE,EAAMiB,UAAU7O,KAAKoS,eAAetC,GAChE,MAAMuC,EAAiBzE,EAAMsC,OACvBoC,EAAkB1E,EAAMe,UAAYf,EAAMiB,UAAYjB,EAAMgB,OAC9D0D,IACF1E,EAAM2E,MAAQ3E,EAAMe,UAAYf,EAAMgB,OACtChB,EAAM4E,MAAQ5E,EAAMe,SAAWf,EAAMgB,OACrChB,EAAMgB,OAASX,EAAOjO,KAAK0O,QAAUd,EAAMe,QACvCxK,IACEyJ,EAAM2E,QACJ,WAAYjE,IAAQV,EAAMyB,QAAUrN,KAAKsM,EAAOmE,OAAQ7E,IACxD5N,KAAK0S,OAAO1S,KAAK0S,SAEvB9E,EAAMkC,SAAWA,EACjB9P,KAAK2S,kBAGT,MAAOC,EAAIC,GAAMjF,EAAMsC,SACf4C,EAAIC,IAAMC,EAAIC,IAAOrF,EAAMyB,QACnCzB,EAAM+B,SAAW,CAACiD,EAAKE,GAAM,EAAIF,EAAKG,EAAK,EAAI,EAAGF,EAAKG,GAAM,EAAIH,EAAKI,EAAK,EAAI,GAC/ErF,EAAMgC,eAAe,KAAKhC,EAAM+B,SAAS,MAAiC,IAA5B/B,EAAMgC,eAAe,GAAehC,EAAMqB,UAAU,GAAKrB,EAAMgC,eAAe,IAC5HhC,EAAMgC,eAAe,KAAKhC,EAAM+B,SAAS,MAAiC,IAA5B/B,EAAMgC,eAAe,GAAehC,EAAMqB,UAAU,GAAKrB,EAAMgC,eAAe,IAC5H,MAAMtI,EAAasG,EAAMe,SAAUL,EAAOhH,YAAuB,CAAC,EAAG,GAIrE,GAHAsG,EAAMsC,ODvWV,SAASgD,kBAAkBT,GAASU,EAAIC,IAAMC,EAAIC,IAChD,OAAQC,EAAIC,IAAMC,EAAIC,IAAOjB,EAC7B,MAAO,CAAC3K,wBAAwBqL,EAAII,EAAIC,EAAIH,GAAKvL,wBAAwBsL,EAAIK,EAAIC,EAAIJ,GACvF,CCoWmBJ,CAAkBtF,EAAMyB,QAASzB,EAAMsC,OAAQ5I,GAC9DsG,EAAMmC,MAAQpJ,EAAEQ,IAAIyG,EAAMsC,OAAQmC,GAClCrS,KAAK2T,kBACDrB,KAAqB1E,EAAM4E,MAAQ9B,EApKN,IAoK0C,CACzE9C,EAAMmC,MAAQpJ,EAAEQ,IAAIyG,EAAMsC,OAAQmC,GAClC,MAAMuB,EAAgBhG,EAAMmC,MAAMjD,IAAIpF,KAAKC,KAC3ChB,EAAES,MAAMwG,EAAMrG,SAAUqM,GACxBhG,EAAM8B,UAAY9B,EAAMmC,MAAMjD,IAAIpF,KAAKwK,MACvCtE,EAAMuB,WAAavB,EAAMwB,OAAOtC,IAAIpF,KAAKwK,OACpCtE,EAAM2E,OAAS7B,EAAK,IACvB9C,EAAMiC,SAAW,CAAC+D,EAAc,GAAKlD,EAAIkD,EAAc,GAAKlD,GAC5D9C,EAAM6B,UAAYiB,EAEtB,CACF,CACAxM,IAAAA,GACE,MAAM0J,EAAQ5N,KAAK4N,MACbK,EAASjO,KAAKiO,OACdK,EAAStO,KAAKsO,OAEpB,GADKV,EAAMe,SAAS3O,KAAK6T,SACpBjG,EAAMiB,WAAajB,EAAMoB,eAAiBpB,EAAMkB,SAAWR,EAAOwF,iBAAkB,OACzF,MAAMvE,EAAOvP,KAAKwO,QAAQ9E,eAAeA,eAAeA,eAAe,CAAA,EAAIuE,GAASL,GAAQ,CAAA,EAAI,CAC9F,CAAC5N,KAAK+T,UAAWnG,EAAMwC,eAEZtJ,IAATyI,IAAoB3B,EAAM2B,KAAOA,EACvC,CACAsE,KAAAA,GACE7T,KAAKkO,WAAW2F,QAChB7T,KAAKoO,aAAayF,OACpB,EAcF,MAAMG,0BAA0BtG,OAC9B3N,WAAAA,IAAe8B,GACboS,SAASpS,GACTkH,gBAAgB/I,KAAM,WAAY,KACpC,CACAgO,KAAAA,GACEiG,MAAMjG,QACNhO,KAAK4N,MAAM0B,UAAOxI,CACpB,CACAiH,IAAAA,GACE/N,KAAK4N,MAAMsC,OAAS,CAAC,EAAG,GACxBlQ,KAAK4N,MAAMqC,WAAa,CAAC,EAAG,EAC9B,CACA0C,aAAAA,GACE3S,KAAK4N,MAAMsC,OAASvJ,EAAEjG,IAAIV,KAAK4N,MAAMqC,WAAYjQ,KAAK4N,MAAMkC,SAC9D,CACA6D,eAAAA,GACE3T,KAAK4N,MAAMkC,SAAWnJ,EAAEQ,IAAInH,KAAK4N,MAAMsC,OAAQlQ,KAAK4N,MAAMqC,WAC5D,CACA0B,UAAAA,CAAWxN,GACT,MAAMyJ,EAAQ5N,KAAK4N,MACbU,EAAStO,KAAKsO,OACpB,IAAKV,EAAM0B,MAAQnL,EAAO,CACxB,MAAM6N,EAA4C,iBAAzB1D,EAAO4F,cAA6B5F,EAAO4F,cAAcpI,eAAe3H,IAAUmK,EAAO4F,cAClHtG,EAAM0B,KAnCZ,SAAS6E,YAAYC,EAAIC,GAAKrC,GAC5B,MAAMsC,EAAQ5M,KAAKC,IAAIyM,GACjBG,EAAQ7M,KAAKC,IAAI0M,GACvB,OAAIC,EAAQC,GAASD,EAAQtC,EACpB,IAELuC,EAAQD,GAASC,EAAQvC,EACpB,SADT,CAIF,CAyBmBmC,CAAWvG,EAAMqB,UAAW+C,EAC3C,CACApE,EAAMiB,UAAYP,EAAOkG,iBAAmBlG,EAAOgB,QAAU1B,EAAM0B,QAAUhB,EAAOgB,MAAQhB,EAAOgB,OAAS1B,EAAM0B,IACpH,CACA8C,cAAAA,CAAehN,GACb,GAAIpF,KAAKsO,OAAOgB,MAAQtP,KAAKsO,OAAOkG,cAClC,OAAQxU,KAAK4N,MAAM0B,MACjB,IAAK,IACHlK,EAAE,GAAK,EACP,MACF,IAAK,IACHA,EAAE,GAAK,EAIf,EAGF,MAAMqP,SAAWrP,GAAKA,EAEhBsP,EAAuB,CAC3BC,QAAOA,CAAC1L,GAAQ,IACPA,EAET2L,aAAYA,CAAC3L,EAAO4L,EAAIvG,IACf5E,eAAeA,eAAe,GAAI4E,EAAOL,OAAO2G,cAAe3L,GAExE0H,eAAcA,CAAC1H,GAAQ,IACdA,EAET6K,iBAAgBA,CAAC7K,GAAQ,IAChBA,EAET3B,UAAAA,CAAW2B,EAAQ,GACjB,OAAQA,GACN,KAAK,EACH,MAAO,CAjBY,SAkBrB,KAAK,EACH,MAAO,CAAC,EAAG,GACb,QACE,OAAOtC,EAAEC,SAASqC,GAEvB,EACDsD,KAAKtD,GACkB,mBAAVA,EAA6BA,EAC3B,MAATA,EAAsBtC,EAAEC,SAASqC,QAArC,EAEFqH,SAAAA,CAAUrH,EAAO4L,EAAIvG,GACnB,MAAMgC,EAAYrH,GAASqF,EAAOL,OAAOqC,UAEzC,GADAtQ,KAAKiS,qBAAuB3B,EACC,gBAAzBwE,QAAQC,IAAIC,SAA4B,CAC1C,MAAMC,EAAoB3E,GAAamE,SACvC,OAAOrP,IACL,MAAM3C,EAAIwS,EAAkB7P,GAI5B,OAHK8P,SAASzS,EAAE,KAAQyS,SAASzS,EAAE,KACjC0S,QAAQC,KAAK,gFAAgF3S,EAAE,MAAM,CAAC,OAEjGA,CAAC,CAEZ,CACA,OAAO6N,GAAamE,QACrB,EACDzC,UAAU/I,GACDtC,EAAEC,SAASqC,EAAO,IAGA,gBAAzB6L,QAAQC,IAAIC,UACd5S,OAAOC,OAAOqS,EAAsB,CAClCW,SAAAA,CAAUpM,GACR,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,oEAEd,OAAOC,GACR,EACDf,aAAAA,CAAcvL,GACZ,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,uGAEd,OAAOC,GACR,EACD/E,OAAAA,CAAQvH,GACN,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,gEAEd,OAAOC,GACT,IAIJ,MACMC,EAA4B9L,eAAeA,eAAe,CAAE,EAAEgL,GAAuB,CAAA,EAAI,CAC7FpF,IAAAA,CAAKmG,EAAIZ,GAAIvF,KACXA,IAGA,GADAtP,KAAKwU,cAAyB,SAATlF,GAChBtP,KAAKwU,cAAe,OAAOlF,CACjC,EACD4E,cAAaA,CAACjL,EARe,IASpBA,EAETwJ,MAAAA,CAAOxJ,EAAQ,IACb,GAAqB,mBAAVA,EACT,OAAO2E,GAAS4H,EAA0B/C,OAAOxJ,EAAM2E,IAEzD,GAAI,YAAa3E,EACf,MAAO,IAAMA,EAAMvD,QAErB,GAA2B,mBAAhBgQ,aAA8BzM,aAAiByM,YACxD,OAAOzM,EAET,MAAM3D,KACJA,GAAQsC,IAAQ/B,MAChBA,EAAQ+B,IAAQvC,IAChBA,GAAOuC,IAAQhC,OACfA,EAASgC,KACPqB,EACJ,MAAO,CAAC,CAAC3D,EAAMO,GAAQ,CAACR,EAAKO,GAC/B,IAGI+P,EAAiB,CACrBC,WAAYA,CAACC,EAAcC,EAAS,IAAM,CAACD,EAAeC,EAAQ,GAClEC,UAAWA,CAACF,EAAcC,EAAS,IAAM,EAAE,EAAID,EAAeC,EAAQ,GACtEE,QAASA,CAACH,EAAcC,EAAS,IAAM,CAAC,GAAI,EAAID,EAAeC,GAC/DG,UAAWA,CAACJ,EAAcC,EAAS,IAAM,CAAC,EAAGD,EAAeC,IA2Q9D,MAAMI,EAA8B,oBAAXpW,QAA0BA,OAAOwG,UAAYxG,OAAOwG,SAAS6P,cACtF,SAASC,sBACP,OAAOF,GAAa,iBAAkBpW,MACxC,CAiBA,MAAMuW,EAAU,CACdH,YACA7L,QATF,SAASiM,wBACP,IACE,MAAO,gBAAiBC,YACzB,CAAC,MAAOhU,GACP,OAAO,CACT,CACF,CAGW+T,GACTlM,MAAOgM,sBACPI,YApBF,SAASC,gBACP,OAAOL,uBAAyBF,GAAapW,OAAO4W,UAAUC,eAAiB,CACjF,CAkBeF,GACb1M,QAlBF,SAAS6M,wBACP,OAAOV,GAAa,kBAAmBpW,MACzC,CAgBW8W,GACTC,YAhBF,SAASC,sBACP,OAAOZ,GAAa,oBAAqBpW,OAAOwG,QAClD,CAcewQ,IASTC,EAA8B,CAClC5M,MAAO,EACPC,MAAO,EACP4M,IAAK,GAEDC,EAAqBvN,eAAeA,eAAe,CAAE,EAAE8L,GAA4B,CAAA,EAAI,CAC3F5K,MAAAA,CAAO6K,EAAIZ,GACT9K,SAASK,MACPA,GAAQ,EAAK8M,KACbA,GAAO,EAAK/M,MACZA,GAAQ,GACN,CAAC,IAGL,OADAnK,KAAK6W,YAAcK,GAAQb,EAAQQ,YAC/BR,EAAQjM,OAASA,EAAc,QAC/BpK,KAAK6W,YAAoB,QACzBR,EAAQtM,UAAYI,EAAc,UAClCkM,EAAQjM,MAAc,QACnB,OACR,EACD+M,iBAAAA,CAAkBlO,EAAO4L,GAAIuC,cAC3BA,IAGA,GADApX,KAAKqX,mBAA8C,iBAAlBD,EAA6BA,EAAgBA,QAAmCtQ,IAAlBsQ,GAA+BnO,EA7B7F,SA6BoInC,EAChKuP,EAAQG,cAAiC,IAAlBY,EAC5B,OAAOnO,SAAkCnC,IAAlBsQ,EAA8B,SAAMtQ,EAC5D,EACDwQ,cAAAA,CAAe7B,EAAIZ,GACjB9K,SAASe,QACPA,GAAU,EAAIqG,QACdA,EAAU,EAAC5H,KACXA,GAAO,GACL,CAAC,IAIL,OAFAvJ,KAAKuX,eAAiBpG,EACtBnR,KAAKuJ,KAAOA,GACJvJ,KAAK6W,aAA+B,YAAhB7W,KAAK4K,QAAwBE,CAC1D,EACDkH,SAAAA,CAAU/I,EAAO4L,GAAI2C,WACnBA,GAAa,EAAKC,cAClBA,EAAgB,EAACnI,KACjBA,IAEA,MAAM0C,EAAYrL,EAAEC,SAASqC,EAAOuO,EAAaC,EAAgBnI,EAAO,EAAI,GAG5E,OAFAtP,KAAKwX,WAAaA,EAClBxX,KAAKyX,cAAgBA,EACdzF,CACR,EACD0F,KAAAA,EAAM7H,SACJA,EArD2B,GAqDMtI,SACjCA,EArD2B,GAqDMoQ,SACjCA,EArD2B,KAsDzB,IACF,MAAO,CACL9H,SAAU7P,KAAKsQ,UAAU3J,EAAEC,SAASiJ,IACpCtI,SAAUvH,KAAKsQ,UAAU3J,EAAEC,SAASW,IACpCoQ,WAEH,EACDC,KAAAA,CAAM3O,EAAQ,GACZ,OAAQA,GACN,KAAK,EACH,OAnEmB,IAoErB,KAAK,EACH,OAAO,EACT,QACE,OAAOA,EAEZ,EACDiL,cAAcjL,GACPA,EACES,eAAeA,eAAe,CAAA,EAAIqN,GAA8B9N,GADpD8N,EAGrBc,qBAAoBA,CAAC5O,EA1Ee,KA2E3BA,IAGkB,gBAAzB6L,QAAQC,IAAIC,UACd5S,OAAOC,OAAO4U,EAAoB,CAChCa,QAAAA,CAAS7O,GACP,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,uHAEd,OAAOC,GACR,EACDwC,iCAAAA,CAAkC9O,GAChC,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,mGAEd,OAAOC,GACR,EACDyC,aAAAA,CAAc/O,GACZ,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,6HAEd,OAAOC,GACR,EACD0C,aAAAA,CAAchP,GACZ,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,4HAEd,OAAOC,GACR,EACD2C,aAAAA,CAAcjP,GACZ,QAAcnC,IAAVmC,EACF,MAAMqM,MAAM,6HAEd,OAAOC,GACT,IA6PwB7L,eAAeA,eAAe,CAAA,EAAIgL,GAAuB,CAAA,EAAI,CACvF9J,MAAAA,CAAO6K,EAAIZ,GAAI5G,OACbA,EACAlE,SAASK,MACPA,GAAQ,GACN,CAAC,IAGL,GADqB6D,EACJtB,SAAW0J,EAAQjM,OAASiM,EAAQhM,QAAS,MAAO,UACrE,GAAIgM,EAAQjM,OAASA,EAAO,MAAO,QACnC,GAAIiM,EAAQG,YAAa,CACvB,GAAIH,EAAQtM,QAAS,MAAO,UAC5B,GAAIsM,EAAQjM,MAAO,MAAO,OAC5B,CACD,EACDqI,MAAAA,CAAOgD,EAAIZ,GAAIsD,YACbA,EAAc,CAAE,EAAAC,YAChBA,EAAc,CAAC,IAEf,MAAMC,aAAezK,IACnB,MAAM0K,EAAI7K,cAAczL,KAAKmW,EAAavK,GAAQ,CAChD7F,KAAMH,IACNI,IAAKJ,MAEP,MAAO,CAAC0Q,EAAEvQ,IAAKuQ,EAAEtQ,IAAI,EAEjBuQ,aAAe3K,IACnB,MAAM4K,EAAI/K,cAAczL,KAAKoW,EAAaxK,GAAQ,CAChD7F,KAAMH,IACNI,IAAKJ,MAEP,MAAO,CAAC4Q,EAAEzQ,IAAKyQ,EAAExQ,IAAI,EAEvB,MAA2B,mBAAhBmQ,GAAqD,mBAAhBC,EAAmC,CAACC,eAAgBE,gBAC7F3K,GAAS,CAACyK,aAAazK,GAAQ2K,aAAa3K,GACpD,EACDoE,SAAAA,CAAU/I,EAAO4L,EAAIvG,GACnBtO,KAAKwU,cAAgC,SAAhBlG,EAAOgB,KAE5B,OADkB3I,EAAEC,SAASqC,EAAOjJ,KAAKwU,cAAgB,CAAC,GAAK,GAAK,EAErE,EACDiE,YAAYxP,QACInC,IAAVmC,EAA4B,UACzBA,EAETyP,aAAYA,CAACzP,GAAQ,IACZA,IA2CgBS,eAAeA,eAAe,CAAA,EAAI8L,GAA4B,CAAA,EAAI,CAC3FmD,UAAWA,CAAC1P,GAAQ,IAASA,IAiGHS,eAAeA,eAAe,CAAA,EAAI8L,GAA4B,CAAA,EAAI,CAC5FmD,UAAWA,CAAC1P,GAAQ,IAASA,IAG/B,MAAM2P,EAAY,IAAIC,IAChBC,EAAoB,IAAID,IAK9B,MAAME,EAAa,CACjB3Q,IAAK,OACL4Q,OA51BF,MAAMC,mBAAmBjF,kBACvBjU,WAAAA,IAAe8B,GACboS,SAASpS,GACTkH,gBAAgB/I,KAAM,SAAU,WAClC,CACAgO,KAAAA,GACEiG,MAAMjG,QACN,MAAMJ,EAAQ5N,KAAK4N,MACnBA,EAAMsL,gBAAapS,EACnB8G,EAAMuL,gBAAiB,EACvBvL,EAAMwL,iBAAkB,EACxBxL,EAAMyL,gBAAiB,EACvBzL,EAAM0L,UAAW,EACjB1L,EAAM8J,MAAQ,CAAC,EAAG,GAClB9J,EAAM2L,KAAM,EACZ3L,EAAM4L,UAAW,EACjB5L,EAAM3L,OAASjC,KAAKiC,OAAOK,KAAKtC,KAClC,CACA0S,KAAAA,GACE,MAAM9E,EAAQ5N,KAAK4N,MACnB,GAAIA,EAAMyB,mBAAmBqG,YAAa,CACxC,MAAM+D,EAAY7L,EAAMyB,QAAQvJ,wBAC1B4T,EAAa9L,EAAMhB,cAAc9G,wBACjCuJ,EAAU,CACd/J,KAAMmU,EAAUnU,KAAOoU,EAAWpU,KAAOsI,EAAMsC,OAAO,GACtDrK,MAAO4T,EAAU5T,MAAQ6T,EAAW7T,MAAQ+H,EAAMsC,OAAO,GACzD7K,IAAKoU,EAAUpU,IAAMqU,EAAWrU,IAAMuI,EAAMsC,OAAO,GACnDtK,OAAQ6T,EAAU7T,OAAS8T,EAAW9T,OAASgI,EAAMsC,OAAO,IAE9DtC,EAAMyB,QAAUmG,EAA0B/C,OAAOpD,EACnD,CACF,CACApN,MAAAA,GACE,MAAM2L,EAAQ5N,KAAK4N,MACfA,EAAM4L,WACV5L,EAAM4L,UAAW,EACjB5L,EAAMe,SAAU,EAChB5M,YAAW,KACT/B,KAAKyQ,UACLzQ,KAAKkE,MAAM,GACV,GACL,CACAyV,SAAAA,GACE3Z,KAAK4N,MAAMe,QAAU3O,KAAK4N,MAAMuL,gBAAkBnZ,KAAK4N,MAAMwL,eAC/D,CACAvF,KAAAA,GACE7T,KAAK4Z,eACL5Z,KAAK4N,MAAMuL,gBAAiB,EAC5BnZ,KAAK4N,MAAMwL,iBAAkB,EAC7BnF,MAAMJ,OACR,CACAgG,WAAAA,CAAY1V,GACV,MAAMmK,EAAStO,KAAKsO,OACdV,EAAQ5N,KAAK4N,MACnB,GAAqB,MAAjBzJ,EAAMgN,UAAoBpK,MAAMC,QAAQsH,EAAOiJ,iBAAmBjJ,EAAOiJ,eAAerM,SAAS/G,EAAMgN,UAAsC,IAA3B7C,EAAOiJ,gBAAyBjJ,EAAOiJ,iBAAmBpT,EAAMgN,SAAU,OAChM,MAAM2I,EAAU9Z,KAAK2N,KAAKoM,YAAY5V,GAClCmK,EAAOgJ,gBACTnT,EAAMwI,OAAOqN,kBAAkB7V,EAAM6I,WAEnC8M,GAAWA,EAAQhJ,KAAO,GAAKlD,EAAMuL,iBACzCnZ,KAAKgK,MAAM7F,GACXnE,KAAKia,aAAa9V,GAClByJ,EAAMsL,WAAalM,UAAU7I,GAC7ByJ,EAAMuL,gBAAiB,EACvBnZ,KAAK6N,cAAcX,cAAc/I,IACjCnE,KAAK8N,iBACDQ,EAAO6I,mBAA+C,UAA1BrL,eAAe3H,IAC7CyJ,EAAMe,SAAU,EAChB3O,KAAKka,sBAAsB/V,IAClBmK,EAAOsJ,MAAQ,GACxB5X,KAAKma,kBAAkBhW,GACnBmK,EAAOwF,mBACT9T,KAAKyQ,QAAQtM,GACbnE,KAAKkE,SAGPlE,KAAKoa,iBAAiBjW,GAE1B,CACAiW,gBAAAA,CAAiBjW,GACf,MAAMyJ,EAAQ5N,KAAK4N,MACnBA,EAAMe,SAAU,EAChBf,EAAMyL,gBAAiB,EACvBzL,EAAM0L,UAAW,EACjBtZ,KAAKyQ,QAAQtM,GACbnE,KAAKkE,MACP,CACAmW,WAAAA,CAAYlW,GACV,MAAMyJ,EAAQ5N,KAAK4N,MACbU,EAAStO,KAAKsO,OACpB,IAAKV,EAAMuL,eAAgB,OAC3B,MAAMmB,EAAKtN,UAAU7I,GACrB,QAAyB2C,IAArB8G,EAAMsL,YAA4BoB,IAAO1M,EAAMsL,WAAY,OAC/D,MAAM7I,EAAUnD,cAAc/I,GAS9B,OARImC,SAAS0K,qBAAuB7M,EAAMwI,OACxCiB,EAAMwB,OAAS,CAACjL,EAAMoW,UAAWpW,EAAMqW,YAEvC5M,EAAMwB,OAASzI,EAAEQ,IAAIkJ,EAASzC,EAAMyC,SACpCrQ,KAAK6N,cAAcwC,IAErB1J,EAAES,MAAMwG,EAAMqB,UAAWrB,EAAMwB,QAC/BpP,KAAKyQ,QAAQtM,GACTyJ,EAAM0L,UAAY1L,EAAMoB,aAC1BhP,KAAKoO,aAAatN,OAAO,aACzB8M,EAAMgB,QAAS,OACf5O,KAAKoa,iBAAiBjW,IAGpBmK,EAAO6I,oBAAsBvJ,EAAMyL,eACjCzL,EAAM0B,KACJ1B,EAAM0B,OAAShB,EAAO6I,mBAAkD,OAA7B7I,EAAO6I,mBACpDvJ,EAAMe,SAAU,OAChB3O,KAAK6T,UAGL7T,KAAKoO,aAAatN,OAAO,yBACzBd,KAAKoa,iBAAiBjW,SAIxB,OAGJnE,KAAKkE,MACP,CACAuW,SAAAA,CAAUtW,GACRnE,KAAK2N,KAAKoM,YAAY5V,GACtB,IACMnE,KAAKsO,OAAOgJ,gBAAkBnT,EAAMwI,OAAO+N,kBAAkBvW,EAAM6I,YAErE7I,EAAMwI,OAAOgO,sBAAsBxW,EAAM6I,UAE5C,CAAC,MAAO4N,GACsB,gBAAzB9F,QAAQC,IAAIC,UACdG,QAAQC,KAAK,gKAEjB,CACA,MAAMxH,EAAQ5N,KAAK4N,MACbU,EAAStO,KAAKsO,OACpB,IAAKV,EAAMe,UAAYf,EAAMuL,eAAgB,OAC7C,MAAMmB,EAAKtN,UAAU7I,GACrB,QAAyB2C,IAArB8G,EAAMsL,YAA4BoB,IAAO1M,EAAMsL,WAAY,OAC/DlZ,KAAK4N,MAAMuL,gBAAiB,EAC5BnZ,KAAK2Z,YACL3Z,KAAKyQ,QAAQtM,GACb,MAAOiQ,EAAIC,GAAMzG,EAAMsB,UAEvB,GADAtB,EAAM2L,IAAMnF,GAAM9F,EAAOmJ,eAAiBpD,GAAM/F,EAAOmJ,cACnD7J,EAAM2L,KAAOjL,EAAOkJ,WACtB5J,EAAMkB,QAAS,MACV,CACL,MAAO+L,EAAKC,GAAOlN,EAAMwB,QAClB2L,EAAKC,GAAOpN,EAAMqB,WAClBgM,EAAKC,GAAO5M,EAAOoJ,MAAM7H,UACzBsL,EAAIC,GAAM9M,EAAOoJ,MAAMnQ,SACxB8T,EAAM/M,EAAOoJ,MAAMC,SACzB,GAAI/J,EAAM4B,YAAc6L,EAAK,CAC3B,MAAMC,EAAM5T,KAAKC,IAAIkT,EAAMjN,EAAM6B,WAC3B8L,EAAM7T,KAAKC,IAAImT,EAAMlN,EAAM6B,WAC7B6L,EAAML,GAAOvT,KAAKC,IAAIoT,GAAOI,IAAIvN,EAAM8J,MAAM,GAAKhQ,KAAKwK,KAAK2I,IAC5DU,EAAML,GAAOxT,KAAKC,IAAIqT,GAAOI,IAAIxN,EAAM8J,MAAM,GAAKhQ,KAAKwK,KAAK4I,GAClE,CACF,CACA9a,KAAKkE,MACP,CACAsX,YAAAA,CAAarX,IACNnE,KAAK4N,MAAM2L,KAAOpV,EAAMsX,OAAS,IACpCtX,EAAMwM,iBACNxM,EAAMuX,kBAEV,CACAzB,YAAAA,CAAa9V,GACX,MAAMmK,EAAStO,KAAKsO,OACd1D,EAAS0D,EAAO1D,OACtB,GAA6B,gBAAzBkK,QAAQC,IAAIC,SACd,IACE,GAAe,YAAXpK,QAAsD9D,IAA9BwH,EAAO+I,mBAAkC,CACnE,MAAMzK,EAAgB,OAAQzI,EAAQA,EAAMwX,YAAY/O,cAAgBzI,EAAMyI,cAEpD,SADZ9M,OAAO+C,iBAAiB+J,GAC5BgP,aACRzG,QAAQC,KAAK,kaAAyaxI,EAE1b,CACF,CAAE,MAAOiP,GAAW,CAElBvN,EAAOuI,aACT1S,EAAMyI,cAAckP,qBAEjBxN,EAAOgJ,iBACVtX,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ8K,EAAQ,SAAU5K,KAAKqa,YAAY/X,KAAKtC,OACtFA,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ8K,EAAQ,MAAO5K,KAAKya,UAAUnY,KAAKtC,OACjFA,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ8K,EAAQ,SAAU5K,KAAKya,UAAUnY,KAAKtC,OAExF,CACA4Z,YAAAA,GACM5Z,KAAKsO,OAAOuI,aAAevQ,SAAS0K,qBAAuBhR,KAAK4N,MAAMhB,eACxEtG,SAASyV,iBAEb,CACA3E,aAAAA,CAAcjT,GACRnE,KAAK4N,MAAMyL,gBAAkBlV,EAAMyM,YACrCzM,EAAMwM,gBAEV,CACAuJ,qBAAAA,CAAsB/V,GACpBnE,KAAK4N,MAAMyL,gBAAiB,EAyDhC,SAAS2C,aAAa7X,GACpB,YAAaA,GAAkC,mBAAlBA,EAAM8X,SAA0B9X,EAAM8X,SACrE,CA1DID,CAAa7X,GACb,MAAMrD,EAASd,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ,QAAS,SAAUE,KAAKoX,cAAc9U,KAAKtC,MAAO,CAC7GyL,SAAS,IAEXzL,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ,QAAS,MAAOgB,GAC9Dd,KAAKkO,WAAWxN,IAAIV,KAAKuO,aAAazO,OAAQ,QAAS,SAAUgB,GACjEd,KAAKoO,aAAa1N,IAAI,mBAAoBV,KAAKoa,iBAAiB9X,KAAKtC,MAAOA,KAAKsO,OAAO+I,mBAAoBlT,EAC9G,CACAgW,iBAAAA,CAAkBhW,GAChBnE,KAAK4N,MAAM0L,UAAW,EACtBtZ,KAAKoO,aAAa1N,IAAI,aAAa,KACjCV,KAAK4N,MAAMmB,MAAQ,CAAC,EAAG,GACvB/O,KAAKoa,iBAAiBjW,EAAM,GAC3BnE,KAAKsO,OAAOsJ,MACjB,CACAsE,OAAAA,CAAQ/X,GACN,MAAMgY,EAAUxG,EAAexR,EAAMiE,KACrC,GAAI+T,EAAS,CACX,MAAMvO,EAAQ5N,KAAK4N,MACbkI,EAAS3R,EAAMiN,SAAW,GAAKjN,EAAMkN,OAAS,GAAM,EAC1DrR,KAAKgK,MAAM7F,GACXyJ,EAAMwB,OAAS+M,EAAQnc,KAAKsO,OAAOuJ,qBAAsB/B,GACzDlI,EAAMwL,iBAAkB,EACxBzS,EAAES,MAAMwG,EAAMqB,UAAWrB,EAAMwB,QAC/BpP,KAAKyQ,QAAQtM,GACbnE,KAAKkE,MACP,CACF,CACAkY,KAAAA,CAAMjY,GACEA,EAAMiE,OAAOuN,IACnB3V,KAAK4N,MAAMwL,iBAAkB,EAC7BpZ,KAAK2Z,YACL3Z,KAAKyQ,QAAQtM,GACbnE,KAAKkE,OACP,CACA5B,IAAAA,CAAK+Z,GACH,MAAMzR,EAAS5K,KAAKsO,OAAO1D,OAC3ByR,EAAazR,EAAQ,QAAS5K,KAAK6Z,YAAYvX,KAAKtC,OAChDA,KAAKsO,OAAOgJ,iBACd+E,EAAazR,EAAQ,SAAU5K,KAAKqa,YAAY/X,KAAKtC,OACrDqc,EAAazR,EAAQ,MAAO5K,KAAKya,UAAUnY,KAAKtC,OAChDqc,EAAazR,EAAQ,SAAU5K,KAAKya,UAAUnY,KAAKtC,OACnDqc,EAAa,qBAAsB,GAAIrc,KAAKya,UAAUnY,KAAKtC,QAEzDA,KAAKsO,OAAO/E,OACd8S,EAAa,MAAO,OAAQrc,KAAKkc,QAAQ5Z,KAAKtC,OAC9Cqc,EAAa,MAAO,KAAMrc,KAAKoc,MAAM9Z,KAAKtC,QAExCA,KAAKsO,OAAOkJ,YACd6E,EAAa,QAAS,GAAIrc,KAAKwb,aAAalZ,KAAKtC,MAAO,CACtD8K,SAAS,EACTW,SAAS,GAGf,GA0lBA6Q,SAAUrF,GCt5CZ,SAASsF,yBAAyBC,EAAQC,GACxC,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACIpU,EAAKhE,EADLuI,EAfN,SAAS+P,8BAA8BF,EAAQC,GAC7C,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IAEIpU,EAAKhE,EAFLuI,EAAS,CAAA,EACTgQ,EAAava,OAAOmH,KAAKiT,GAE7B,IAAKpY,EAAI,EAAGA,EAAIuY,EAAWpc,OAAQ6D,IACjCgE,EAAMuU,EAAWvY,GACbqY,EAAS/Q,QAAQtD,IAAQ,IAC7BuE,EAAOvE,GAAOoU,EAAOpU,IAEvB,OAAOuE,CACT,CAIe+P,CAA8BF,EAAQC,GAEnD,GAAIra,OAAOoH,sBAAuB,CAChC,IAAIoT,EAAmBxa,OAAOoH,sBAAsBgT,GACpD,IAAKpY,EAAI,EAAGA,EAAIwY,EAAiBrc,OAAQ6D,IACvCgE,EAAMwU,EAAiBxY,GACnBqY,EAAS/Q,QAAQtD,IAAQ,GACxBhG,OAAOM,UAAUma,qBAAqB7a,KAAKwa,EAAQpU,KACxDuE,EAAOvE,GAAOoU,EAAOpU,GAEzB,CACA,OAAOuE,CACT,CAEA,MAAMmQ,EAAuB,CAC3BnQ,MAAAA,CAAO1D,GACL,GAAIA,EACF,MAAO,IAAM,YAAaA,EAAQA,EAAMvD,QAAUuD,CAGrD,EACD0L,QAAOA,CAAC1L,GAAQ,IACPA,EAETnJ,OAAMA,CAACmJ,GAAQoN,EAAQH,UAAYpW,YAASgH,KACnCmC,EAET2L,aAAYA,EAACnJ,QACXA,GAAU,EAAIX,QACdA,GAAU,GACR,MACK,CACLW,UACAX,YAGJwF,UAAUrH,GACDA,GAIL8T,EAAY,CAAC,SAAU,eAAgB,SAAU,UAAW,aAClE,SAASC,YAAY1O,EAAS,CAAE,EAAE2O,GAChC,MAAMzP,EAAS,CAAA,EACf,IAAK,MAAOpF,EAAKkU,KAAala,OAAO8a,QAAQD,GAC3C,cAAeX,GACb,IAAK,WACH,GAA6B,gBAAzBxH,QAAQC,IAAIC,SAA4B,CAC1C,MAAMvS,EAAI6Z,EAASta,KAAKwL,EAAQc,EAAOlG,GAAMA,EAAKkG,GAC7CxF,OAAOqU,MAAM1a,KAAI+K,EAAOpF,GAAO3F,EACtC,MACE+K,EAAOpF,GAAOkU,EAASta,KAAKwL,EAAQc,EAAOlG,GAAMA,EAAKkG,GAExD,MACF,IAAK,SACHd,EAAOpF,GAAO4U,YAAY1O,EAAOlG,GAAMkU,GACvC,MACF,IAAK,UACCA,IAAU9O,EAAOpF,GAAOkG,EAAOlG,IAIzC,OAAOoF,CACT,CA2CA,MAAM4P,WACJrd,WAAAA,CAAY4N,EAAM0P,GAChBtU,gBAAgB/I,KAAM,aAAc,IAAIsd,KACxCtd,KAAKud,MAAQ5P,EACb3N,KAAKwd,YAAcH,CACrB,CACA3c,GAAAA,CAAI+E,EAASmF,EAAQC,EAAQ2D,EAASiP,GACpC,MAAMC,EAAY1d,KAAK2d,WACjBzR,ED5BV,SAAS0R,eAAehT,EAAQC,EAAS,IACvC,MAAME,EAAcjB,EAAec,GAEnC,OAAOA,GADWG,GAAcA,EAAYF,IAAoBA,EAElE,CCwBiB+S,CAAehT,EAAQC,GAE9B+J,EAAelL,eAAeA,eAAe,CAAE,EADpC1J,KAAKwd,YAAcxd,KAAKud,MAAMjP,OAAOtO,KAAKwd,aAAa5I,aAAe,CAAA,GACrB6I,GAClEhY,EAAQoY,iBAAiB3R,EAAMsC,EAASoG,GACxC,MAAM9T,OAASA,KACb2E,EAAQqY,oBAAoB5R,EAAMsC,EAASoG,GAC3C8I,EAAUK,OAAOjd,OAAO,EAG1B,OADA4c,EAAUhd,IAAII,QACPA,MACT,CACA+S,KAAAA,GACE7T,KAAK2d,WAAWhU,SAAQ7I,GAAUA,MAClCd,KAAK2d,WAAWpc,OAClB,EAGF,MAAMyc,aACJje,WAAAA,GACEgJ,gBAAgB/I,KAAM,YAAa,IAAI6Y,IACzC,CACAnY,GAAAA,CAAI0H,EAAK5H,EAAUyd,EAAK,OAAQpc,GAC9B7B,KAAKc,OAAOsH,GACZpI,KAAKke,UAAUC,IAAI/V,EAAKtI,OAAOiC,WAAWvB,EAAUyd,KAAOpc,GAC7D,CACAf,MAAAA,CAAOsH,GACL,MAAM/G,EAAUrB,KAAKke,UAAUE,IAAIhW,GAC/B/G,GAASvB,OAAO0B,aAAaH,EACnC,CACAwS,KAAAA,GACE7T,KAAKke,UAAUvU,SAAQtI,IAAgBvB,OAAO0B,aAAaH,EAAQ,IACnErB,KAAKke,UAAU3c,OACjB,EAGF,MAAM8c,WACJte,WAAAA,CAAY0O,GACV1F,gBAAgB/I,KAAM,WAAY,IAAIsd,KACtCvU,gBAAgB/I,KAAM,oBAAqB,IAAIod,WAAWpd,OAC1D+I,gBAAgB/I,KAAM,qBAAsB,CAAA,GAC5C+I,gBAAgB/I,KAAM,uBAAwB,CAAA,GAC9C+I,gBAAgB/I,KAAM,WAAY,CAAA,GAClC+I,gBAAgB/I,KAAM,SAAU,CAAA,GAChC+I,gBAAgB/I,KAAM,aAAc,IAAIsd,KACxCvU,gBAAgB/I,KAAM,WAAY,IAAIsd,KACtCvU,gBAAgB/I,KAAM,QAAS,CAC7BiO,OAAQ,CACNmD,UAAU,EACVE,SAAS,EACTC,SAAS,EACTF,QAAQ,KA+EhB,SAASiN,gBAAgB3Q,EAAM4Q,GACzBA,EAAiBC,MAAMC,aAAa9Q,EAAM,QAC1C4Q,EAAiBG,OAAOD,aAAa9Q,EAAM,SAC3C4Q,EAAiBI,QAAQF,aAAa9Q,EAAM,UAC5C4Q,EAAiBK,MAAMH,aAAa9Q,EAAM,QAC1C4Q,EAAiBM,OAAOJ,aAAa9Q,EAAM,SAC3C4Q,EAAiBO,OAAOL,aAAa9Q,EAAM,QACjD,CAnFI2Q,CAAgBte,KAAMyO,EACxB,CACAsL,WAAAA,CAAY5V,GACV,OAAI0H,QAAQ1H,IACVnE,KAAKqM,SAAW,IAAIiR,IAAIjR,SAASlI,IAC1BnE,KAAKqM,UACH,cAAelI,GACL,cAAfA,EAAM+H,MAAuC,kBAAf/H,EAAM+H,KAA0BlM,KAAK6Q,WAAWkN,OAAO5Z,EAAM6I,WAAmC,gBAAf7I,EAAM+H,MAAwBlM,KAAK6Q,WAAWnQ,IAAIyD,EAAM6I,WACpKhN,KAAK6Q,iBAFP,CAIT,CACAkO,aAAAA,CAActQ,EAAUuQ,GACtBhf,KAAKyO,SAAWA,EAChBzO,KAAKgf,eAAiBA,CACxB,CACAC,WAAAA,CAAY3Q,EAAQ+O,GAClBrd,KAAKsO,OAvHT,SAAS4Q,MAAMC,EAAW9B,EAAY+B,EAAU,CAAA,GAC9C,MAAMC,EAAOF,GACXxS,OACEA,EAAMiI,aACNA,EAAY9U,OACZA,EAAM6U,QACNA,EAAOrE,UACPA,GACE+O,EACJC,EAAO/C,yBAAyB8C,EAAMtC,GAQxC,GAPAqC,EAAQnR,OAAS+O,YAAY,CAC3BrQ,SACAiI,eACA9U,SACA6U,UACArE,aACCwM,GACCO,EAAY,CACd,MAAMf,EAAWxD,EAAkBsF,IAAIf,GACvC+B,EAAQ/B,GAAcL,YAAYtT,eAAe,CAC/CuE,OAAQmR,EAAQnR,QACfqR,GAAOhD,EACZ,MACE,IAAK,MAAMlU,KAAOkX,EAAM,CACtB,MAAMhD,EAAWxD,EAAkBsF,IAAIhW,GACvC,GAAIkU,EACF8C,EAAQhX,GAAO4U,YAAYtT,eAAe,CACxCuE,OAAQmR,EAAQnR,QACfqR,EAAKlX,IAAOkU,QACV,GAA6B,gBAAzBxH,QAAQC,IAAIC,WAChB,CAAC,OAAQ,QAAS,SAAU,QAAS,OAAQ,SAAS9J,SAAS9C,GAAM,CACxE,GAAY,cAARA,EACF,MAAMkN,MAAM,oEAEdH,QAAQC,KAAK,wCAAwChN,uEACvD,CAEJ,CAEF,OAAOgX,CACT,CA+EkBF,CAAM5Q,EAAQ+O,EAAYrd,KAAKsO,OAC/C,CACAuF,KAAAA,GACE7T,KAAKuf,kBAAkB1L,QACvB,IAAK,MAAMzL,KAAOpI,KAAKwf,SACrBxf,KAAKmO,mBAAmB/F,GAAKyL,QAC7B7T,KAAKqO,qBAAqBjG,GAAKyL,OAEnC,CACA4L,MAAAA,GAEE,OADIzf,KAAKsO,OAAOL,OAAOtB,QAAQ3M,KAAKsC,OAC7B,IAAMtC,KAAKuf,kBAAkB1L,OACtC,CACAvR,IAAAA,IAAQT,GACN,MAAM0M,EAAevO,KAAKsO,OAAOL,OAC3ByR,EAAQ,CAAA,EACd,IAAI/S,EACJ,IAAI4B,EAAa5B,SACfA,EAAS4B,EAAa5B,SACjBA,GAFP,CAIA,GAAI4B,EAAaoG,QAAS,CACxB,IAAK,MAAM0I,KAAcrd,KAAKwf,SAAU,CACtC,MAAMG,EAAgB3f,KAAKsO,OAAO+O,GAC5BhB,EAAeuD,YAAYF,EAAOC,EAAc/K,eAAgBjI,GACtE,GAAIgT,EAAchL,QAAS,CAEzB,IADeiE,EAAUwF,IAAIf,GAC7B,CAAWrd,KAAM6B,EAAMwb,GAAY/a,KAAK+Z,EAC1C,CACF,CACA,MAAMwD,EAAqBD,YAAYF,EAAOnR,EAAaqG,eAAgBjI,GAC3E,IAAK,MAAMrB,KAAYtL,KAAKgf,eAC1Ba,EAAmBvU,EAAU,IAAInH,GAASnE,KAAKgf,eAAe1T,GAAU5B,eAAeA,eAAe,CAAA,EAAI1J,KAAK4N,MAAMK,QAAS,GAAI,CAChI9J,QACAtC,gBACGiF,GAAW,EAEpB,CACA,IAAK,MAAMgZ,KAAeJ,EACxBA,EAAMI,GAAexS,SAASoS,EAAMI,IAEtC,IAAKnT,EAAQ,OAAO+S,EACpB,IAAK,MAAMI,KAAeJ,EAAO,CAC/B,MAAM9U,OACJA,EAAME,QACNA,EAAOW,QACPA,GACEL,UAAU0U,GACd9f,KAAKuf,kBAAkB7e,IAAIiM,EAAQ/B,EAAQ,GAAI8U,EAAMI,GAAc,CACjEhV,UACAW,WAEJ,CAhCA,CAiCF,EAEF,SAASgT,aAAa9Q,EAAM0P,GAC1B1P,EAAK6R,SAAS9e,IAAI2c,GAClB1P,EAAKQ,mBAAmBkP,GAAc,IAAID,WAAWzP,EAAM0P,GAC3D1P,EAAKU,qBAAqBgP,GAAc,IAAIW,YAC9C,CASA,MAAM4B,YAAcA,CAACF,EAAO9K,EAAcmL,IAAsB,CAACnV,EAAQC,EAAQ2D,EAASiP,EAAU,GAAIuC,GAAW,KACjH,IAAIC,EAAkBC,EACtB,MAAMpV,EAAmD,QAAxCmV,EAAmBxC,EAAQ3S,eAA0C,IAArBmV,EAA8BA,EAAmBrL,EAAa9J,QACzHW,EAAmD,QAAxCyU,EAAmBzC,EAAQhS,eAA0C,IAArByU,EAA8BA,EAAmBtL,EAAanJ,QAC/H,IAAIqU,EAAcE,EAAWpV,EAASD,cAAcC,EAAQC,EAAQC,GAChEiV,GAAqBtU,IAASqU,GAAe,WACjDJ,EAAMI,GAAeJ,EAAMI,IAAgB,GAC3CJ,EAAMI,GAAanf,KAAK6N,EAAQ,EC/PlC,SAAS2R,QAAQ3R,EAASF,GAExB,OFw4CF,SAAS8R,eAAevV,GACtB+N,EAAUuF,IAAItT,EAAOzC,IAAKyC,EAAOmO,QACjCF,EAAkBqF,IAAItT,EAAOzC,IAAKyC,EAAOyR,SAC3C,CE54CE8D,CAAerH,GAfjB,SAASsH,eAAe5R,EAAUH,EAAS,CAAA,EAAI+O,EAAY2B,GACzD,MAAMrR,EAAO2S,EAAMC,SAAQ,IAAM,IAAIlC,WAAW5P,IAAW,IAO3D,GANAd,EAAKoR,cAActQ,EAAUuQ,GAC7BrR,EAAKsR,YAAY3Q,EAAQ+O,GACzBiD,EAAME,UAAU7S,EAAK8R,OAAOnd,KAAKqL,IACjC2S,EAAME,WAAU,IACP7S,EAAKkG,MAAMvR,KAAKqL,IACtB,SACmB7G,IAAlBwH,EAAO3B,OACT,OAAOgB,EAAKrL,KAAKA,KAAKqL,EAG1B,CAIS0S,CAAe,CACpB7B,KAAMhQ,GACK,CAAA,EAAI,OACnB,CC1BA,MAAMiS,iBAAiB,WAAA1gB,EAAa2gB,SAAStc,EAAE,EAAEuc,iBAAiBxgB,EAAE,CAACkF,IAAI,EAAEO,OAAO,EAAEN,KAAK,EAAEO,MAAM,GAAG+a,WAAWvgB,GAAE,EAAGwgB,QAAQ5b,EAAE,SAAS,CAAA,GAAIjF,KAAK8gB,qBAAqBzgB,EAAEL,KAAK+gB,iBAAiB9b,EAAEjF,KAAK0gB,SAAStc,EAAEpE,KAAK2gB,iBAAiBxgB,EAAEH,KAAKghB,UAAU,GAAGhhB,KAAKihB,WAAW,GAAGjhB,KAAKkhB,eAAe,GAAGlhB,KAAKmhB,WAAW,GAAGnhB,KAAKohB,QAAQ,GAAGphB,KAAKqhB,KAAK,GAAGrhB,KAAKshB,UAAU,CAAA,EAAGthB,KAAKuhB,eAAe,EAAE,CAAC,iBAAAC,CAAkBpd,EAAEjE,EAAEE,EAAE,QAAQL,KAAKshB,UAAUnhB,EAAEH,KAAKmhB,WAAW/c,EAAE0I,KAAK,CAAC1I,EAAEjE,KAAK,IAAIiE,EAAE,MAAM,CAAC,EAAE,GAAGpE,KAAKkhB,eAAe/gB,GAAG,CAAC,EAAE,GAAGH,KAAKohB,QAAQjhB,GAAG,EAAE,MAAMshB,KAAKphB,GAAG+D,EAAE,MAAM,CAAC/D,EAAEkF,MAAM,EAAElF,EAAEmF,OAAO,EAAG,IAAGnF,EAAEL,MAAMA,KAAKghB,UAAUrX,SAAS,CAACxJ,EAAEE,KAAKL,KAAKqhB,KAAKhhB,GAAGqH,KAAKga,MAAM1hB,KAAK0gB,UAAUvgB,EAAE,GAAGH,KAAKshB,UAAU/b,QAAQmC,KAAKga,MAAM1hB,KAAK0gB,UAAUvgB,EAAE,GAAGH,KAAKshB,UAAU9b,SAASxF,KAAK0gB,SAAS1gB,KAAK2hB,YAAYvd,EAAE/D,IAAIoF,QAAQ,CAACE,EAAExF,EAAE,GAAGoD,EAAEpD,EAAE,IAAK,GAAE,CAAC,gBAAAyhB,CAAiBxd,GAAG,MAAM,CAACyd,MAAMna,KAAKoa,KAAK1d,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI2d,MAAMra,KAAKsa,MAAM5d,EAAE,GAAGA,EAAE,IAAI,CAAC,oBAAA6d,CAAqB7d,EAAEjE,GAAG,MAAM,CAACiE,EAAEsD,KAAKwa,IAAI/hB,GAAGiE,EAAEsD,KAAKya,IAAIhiB,GAAG,CAAC,UAAAiiB,CAAWhe,GAAG,OAAOpE,KAAKohB,QAAQhd,IAAI,CAAC,CAAC,WAAAud,CAAYvd,GAAGuB,EAAExF,EAAE,EAAEoD,EAAElD,EAAE,EAAEoD,EAAEwB,EAAE,IAAIb,IAAIA,EAAErB,MAAMsf,QAAQ,0BAA0BliB,QAAQE,QAAQ4E,QAAQ,CAAC,YAAAqd,CAAale,GAAG,GAAG,UAAUpE,KAAK+gB,iBAAiB,OAAO,MAAM5gB,EAAEH,KAAK2gB,iBAAiBtb,IAAIhF,EAAEL,KAAK2gB,iBAAiBrb,KAAKL,EAAEjF,KAAK2gB,iBAAiB9a,MAAM,EAAEtD,EAAEvC,KAAK2gB,iBAAiB/a,OAAO,EAAE,IAAI,IAAIV,EAAE,EAAEA,EAAEd,EAAE7D,OAAO2E,IAAI,CAAC,MAAMd,EAAEpE,KAAKmhB,WAAWjc,GAAG,IAAI1C,EAAExC,KAAKihB,WAAW/b,GAAGzC,EAAEzC,KAAKghB,UAAU9b,GAAGzC,EAAE,GAAG2B,EAAE,GAAGpE,KAAKshB,UAAU9b,OAAOrF,IAAIH,KAAKoiB,WAAWld,GAAGlF,KAAKihB,WAAW/b,GAAG,IAAI1C,EAAE,GAAGxC,KAAKghB,UAAU9b,GAAG,GAAGd,EAAE,GAAGpE,KAAKshB,UAAU9b,OAAOrF,GAAGsC,EAAE,GAAG2B,EAAE,GAAGpE,KAAKshB,UAAU/b,MAAMlF,IAAIL,KAAKoiB,WAAWld,GAAGlF,KAAKihB,WAAW/b,GAAG,IAAI1C,EAAE,GAAGxC,KAAKghB,UAAU9b,GAAG,GAAGd,EAAE,GAAGpE,KAAKshB,UAAU/b,MAAMlF,GAAGoC,EAAE,GAAGzC,KAAKshB,UAAU9b,OAAOjD,EAAE6B,EAAE,KAAKpE,KAAKoiB,WAAWld,GAAGlF,KAAKihB,WAAW/b,GAAG,IAAI1C,EAAE,GAAGxC,KAAKghB,UAAU9b,GAAG,GAAGlF,KAAKshB,UAAU9b,OAAOjD,EAAE6B,EAAE,IAAI3B,EAAE,GAAGzC,KAAKshB,UAAU/b,MAAMN,EAAEb,EAAE,KAAKpE,KAAKoiB,WAAWld,GAAGlF,KAAKihB,WAAW/b,GAAG,IAAI1C,EAAE,GAAGxC,KAAKghB,UAAU9b,GAAG,GAAGlF,KAAKshB,UAAU/b,MAAMN,EAAEb,EAAE,GAAG,CAAC,CAAC,eAAAme,CAAgBne,GAAG,GAAG,aAAapE,KAAK+gB,iBAAiB,OAAO,MAAM5gB,EAAEH,KAAK2gB,iBAAiBtb,IAAIhF,EAAEL,KAAK2gB,iBAAiBrb,KAAKL,EAAEjF,KAAK2gB,iBAAiB9a,MAAM,EAAEtD,EAAEvC,KAAK2gB,iBAAiB/a,OAAO,EAAE,IAAI,IAAIV,EAAE,EAAEA,EAAEd,EAAE7D,OAAO2E,IAAI,CAAC,MAAMd,EAAEpE,KAAKmhB,WAAWjc,GAAG,IAAI1C,EAAExC,KAAKghB,UAAU9b,GAAGzC,EAAEzC,KAAKihB,WAAW/b,GAAG4H,KAAK1I,GAAGsD,KAAKwK,KAAK9N,MAAM,IAAI3B,EAAE,IAAID,EAAE,GAAG4B,EAAE,GAAGpE,KAAKshB,UAAU9b,OAAOrF,IAAIH,KAAKghB,UAAU9b,GAAG,GAAGd,EAAE,GAAGpE,KAAKshB,UAAU9b,OAAOjD,GAAG,IAAIE,EAAE,IAAID,EAAE,GAAGxC,KAAKshB,UAAU9b,OAAOjD,EAAE6B,EAAE,KAAKpE,KAAKghB,UAAU9b,GAAG,GAAGlF,KAAKshB,UAAU9b,OAAOrF,EAAEiE,EAAE,KAAK,IAAI3B,EAAE,IAAID,EAAE,GAAG4B,EAAE,GAAGpE,KAAKshB,UAAU/b,MAAMlF,IAAIL,KAAKghB,UAAU9b,GAAG,GAAGd,EAAE,GAAGpE,KAAKshB,UAAU/b,MAAMN,GAAG,IAAIxC,EAAE,IAAID,EAAE,GAAGxC,KAAKshB,UAAU/b,MAAMN,EAAEb,EAAE,KAAKpE,KAAKghB,UAAU9b,GAAG,GAAGlF,KAAKshB,UAAU/b,MAAMlF,EAAE+D,EAAE,GAAG,CAAC,CAAC,WAAAoe,CAAYpe,EAAEjE,GAAG,MAAME,EAAEL,KAAKqhB,KAAKlhB,GAAG,IAAI8E,EAAEjF,KAAKqhB,KAAKjd,GAAG7B,GAAE,EAAG,IAAI,IAAI6B,GAAG,EAAEA,EAAE,EAAEA,IAAI,IAAI,IAAIjE,GAAG,EAAEA,EAAE,EAAEA,IAAI,CAAC,IAAI+E,EAAED,EAAEjF,KAAK0gB,SAAStc,EAAEjE,EAAE,KAAK+E,EAAE,GAAGA,EAAElF,KAAK0gB,SAAS1gB,KAAK0gB,WAAWxb,IAAI7E,EAAE,CAACkC,GAAE,EAAG,KAAK,CAAC,CAAC,OAAOA,CAAC,CAAC,wBAAAkgB,CAAyBre,EAAEjE,GAAG,MAAME,EAAEL,KAAKmhB,WAAW/c,GAAGa,EAAEjF,KAAKghB,UAAU5c,GAAG7B,EAAEvC,KAAKmhB,WAAWhhB,GAAG+E,EAAElF,KAAKghB,UAAU7gB,GAAG,OAAO8E,EAAE6H,KAAG,CAAG1I,EAAEjE,IAAIuH,KAAKC,IAAIvD,EAAEc,EAAE/E,IAAIE,EAAEF,GAAGoC,EAAEpC,KAAKuiB,OAAOte,GAAGA,GAAG,CAAC,sBAAAue,CAAuBve,EAAEjE,GAAG,MAAME,EAAEL,KAAKghB,UAAU5c,GAAGa,EAAEjF,KAAKmhB,WAAW/c,GAAG7B,EAAEvC,KAAKghB,UAAU7gB,GAAG+E,EAAElF,KAAKmhB,WAAWhhB,GAAGqC,EAAEnC,EAAEyM,KAAK,CAAC1I,EAAEjE,IAAI8E,EAAE9E,GAAG+E,EAAE/E,GAAGuH,KAAKC,IAAIvD,EAAE7B,EAAEpC,MAAMsC,EAAEpC,EAAEyM,MAAM1I,EAAEjE,KAAKuH,KAAKwK,KAAK9N,EAAE7B,EAAEpC,MAAM,OAAOqC,EAAEsK,KAAG,CAAG1I,EAAEjE,IAAIsC,EAAEtC,GAAGuH,KAAKM,IAAI,EAAE5D,EAAE,KAAK,CAAC,UAAAwc,CAAWxc,GAAG,GAAGpE,KAAK8gB,qBAAqB,CAAC9gB,KAAKuhB,eAAe,GAAG,IAAI,IAAIphB,EAAE,EAAEA,EAAEiE,EAAE7D,OAAOJ,IAAI,CAAC,IAAIiE,EAAEpE,KAAKihB,WAAW9gB,GAAGH,KAAKqhB,KAAK1X,SAAO,CAAGtJ,EAAE4E,KAAK,GAAGA,IAAI9E,EAAE,OAAO,IAAIoC,EAAEvC,KAAKihB,WAAWhc,GAAG,GAAGjF,KAAKuhB,eAAeqB,MAAM,EAAEC,KAAKze,EAAE0e,OAAOziB,KAAK+D,IAAIa,GAAG5E,IAAIF,IAAI,OAAO,IAAIH,KAAKwiB,YAAYriB,EAAE8E,GAAG,OAAO,IAAIjF,KAAKyiB,yBAAyBtiB,EAAE8E,GAAG,OAAOjF,KAAKuhB,eAAe5gB,KAAK,CAACkiB,KAAK1iB,EAAE2iB,OAAO7d,IAAI,MAAMC,EAAE,IAAId,EAAE2e,QAAM,CAAG3e,EAAEjE,IAAIiE,EAAEjE,EAAEA,GAAG,GAAGoC,EAAEwgB,QAAM,CAAG3e,EAAEjE,IAAIiE,EAAEjE,EAAEA,GAAG,IAAI,IAAIqC,EAAExC,KAAK2iB,uBAAuBxiB,EAAE8E,GAAGxC,EAAE2B,EAAE0I,KAAK,CAAC1I,EAAEjE,IAAIiE,EAAE5B,EAAErC,KAAKN,EAAE0C,EAAEuK,KAAK,CAAC1I,EAAEjE,IAAIiE,EAAE5B,EAAErC,KAAK,MAAMwE,EAAE,IAAIlC,EAAEsgB,QAAM,CAAG3e,EAAEjE,IAAIiE,EAAEjE,EAAEA,GAAG,GAAGN,EAAEkjB,QAAQ,CAAC3e,EAAEjE,IAAIiE,EAAEjE,EAAEA,GAAG,IAAI,GAAG,IAAIwE,EAAE,CAAC,MAAMP,EAAEsD,KAAKoa,KAAK5c,EAAEP,GAAGlC,EAAEA,EAAEqK,KAAK3M,GAAGA,EAAEiE,IAAIvE,EAAEA,EAAEiN,KAAK3M,GAAGA,EAAEiE,GAAG,CAACpE,KAAKihB,WAAW9gB,GAAGN,EAAEG,KAAKihB,WAAWhc,GAAGxC,CAAE,GAAE,CAAC,CAAC,CAAC,MAAAugB,CAAO5e,EAAEjE,GAAGH,KAAKsiB,aAAale,GAAGpE,KAAKuiB,gBAAgBne,GAAGpE,KAAK4gB,WAAWxc,GAAGjE,EAAEH,MAAMA,KAAKghB,UAAUrX,SAAS,CAACvF,EAAEjE,KAAKH,KAAKqhB,KAAKlhB,GAAGuH,KAAKga,MAAM1hB,KAAK0gB,SAAStc,EAAE,GAAGpE,KAAKshB,UAAU/b,OAAOmC,KAAKga,MAAM1hB,KAAK0gB,SAAStc,EAAE,GAAGpE,KAAKshB,UAAU9b,QAAQxF,KAAK0gB,QAAS,GAAE,ECarnI,MAAMuC,EAA0B,CACrCC,OAdF,SAASC,yBAAwBC,MAAEA,EAAKpC,UAAEA,EAASC,WAAEA,EAAUK,UAAEA,IAC/D8B,EAAMzZ,SAAQ,CAAC0Z,EAAGC,KAChBtC,EAAUsC,GAAS,CACjB5b,KAAKwb,SAAW5B,EAAU/b,MAC1BmC,KAAKwb,SAAW5B,EAAU9b,QAE5Byb,EAAWqC,GAAS,CAClB,IAAO5b,KAAKwb,SAAW,IACvB,IAAOxb,KAAKwb,SAAW,IACxB,GAEL,GAoEO,MAAMK,EAAgB,CAC3BC,aA/DF,SAASA,cAAaJ,MAAEA,EAAKpC,UAAEA,EAASC,WAAEA,EAAUwC,UAAEA,IACpDL,EAAMzZ,SAAQ,CAAC0Z,EAAGC,KAChBtC,EAAUsC,GAAStC,EAAUsC,GAAOxW,KAClC,CAAC4W,EAAKtf,IAAMsf,EAAMzC,EAAWqC,GAAOlf,GAAKqf,GAC1C,GAEL,EA0DEE,eAxDF,SAASA,gBAAeP,MACtBA,EAAKpC,UACLA,EAASC,WACTA,EAAUwC,UACVA,EAASvC,eACTA,IAEAkC,EAAMzZ,SAAQ,CAAC0Z,EAAGC,KAChB,IAAIzT,EAAWoR,EAAWqC,GACtBxgB,EAAWke,EAAUsC,GACrBM,EAAU1C,EAAeoC,GAC7B,MAAMO,EAAO,CAAC,GAAI,IAElBhU,EAAWA,EAAS/C,KAClB,CAAC1H,EAAGhB,IAAMgB,GAAiB,KAAbqe,GAAsBre,EAAI,EAAIwe,EAAQxf,GAAKyf,EAAKzf,MAGhEtB,EAAWA,EAASgK,KAAI,CAAC4W,EAAKtf,IAAMsf,EAAM7T,EAASzL,GAAKqf,IAExDzC,EAAUsC,GAASxgB,EACnBme,EAAWqC,GAASzT,EAEpBqR,EAAeoC,GAAS,CAAC,EAAG,EAAE,GAElC,EAiCEQ,UA/BF,SAASA,WAAUV,MACjBA,EAAKpC,UACLA,EAASC,WACTA,EAAUC,eACVA,EAAcuC,UACdA,IAEAL,EAAMzZ,SAAQ,CAAC0Z,EAAGC,KAChB,IAAIzT,EAAWoR,EAAWqC,GACtBxgB,EAAWke,EAAUsC,GACrBM,EAAU1C,EAAeoC,GAC7B,MAAMO,EAAO,CAAC,IAAOnc,KAAKwb,SAAW,IAAM,KAAQxb,KAAKwb,SAAW,KAEnErT,EAAWA,EAAS/C,KAClB,CAAC1H,EAAGhB,IAAMgB,GAAiB,KAAbqe,GAAsBre,EAAI,EAAIwe,EAAQxf,GAAKyf,EAAKzf,MAGhE4c,EAAUsC,GAASxgB,EAAWA,EAASgK,KACrC,CAAC4W,EAAKtf,IAAMsf,EAAM7T,EAASzL,GAAKqf,IAGlCzC,EAAUsC,GAASxgB,EACnBme,EAAWqC,GAASzT,EAEpBqR,EAAeoC,GAAS,CAAC,EAAG,EAAE,GAElC,GAgBO,MAAMS,EAAsB,CACjCC,QATF,SAASC,UAAUC,EAAQhD,EAAgBoC,GACzC,IAAIa,EAAOD,EAAOpX,KAAK4W,GAAQA,EAAMA,IAAKX,QAAO,CAACljB,EAAGuD,IAAMvD,EAAIuD,IAC/D+gB,EAAOzc,KAAKoa,KAAKqC,GAEJ,IAATA,IACJjD,EAAeoC,GAASY,EAAOpX,KAAK4W,GAAQA,EAAMS,IACpD,GCzEA,MAAMC,EAA0BC,EAAc,CAAA,GAE9C,SAASC,sBACP,OAAOC,EAAWH,EACpB,CAEA,SAASI,uBAAsBC,SAC7BA,EAAQC,UACRA,EAASpW,OACTA,EAAS,CACPoS,SAAU,EACVE,YAAY,EACZC,QAAS,QACTF,iBAAkB,CAChBtb,IAAK,EACLO,OAAQ,EACRN,KAAM,EACNO,MAAO,IAEV2b,kBACDA,EAAoBA,OAAQwB,OAC5BA,EAASA,SAET,MAAM2B,EAAYC,EAAO,IAAI/L,MACtBgM,EAAgBC,GAAeC,KAC/BC,GAAoBC,GAAS,IAAM,IAAIxE,iBAAiBnS,KAEzD4W,EAASC,GAAY,CAAC1f,EAAS2f,KACnCT,EAAUjf,QAAQyY,IAAI1Y,EAAS2f,EAAM,GACpC,IACGC,EAAYF,GAAa1f,IAC7Bkf,EAAUjf,QAAQqY,OAAOtY,EAAQ,GAChC,IA+BH,OA7BA+a,GAAU,KACR,MAAM4C,EAAQ,IAAIuB,EAAUjf,QAAQ0K,WCrDjC,SAASkV,aAAaC,GAC3B,OAAKA,GAEExe,MAAMC,QAAQue,IAAuB,IAAfA,EAAIhlB,MACnC,EDmDQ+kB,CAAalC,IAAUA,EAAMR,MAAK,EAAGnB,WAAYA,KAErDuD,EAAiBxD,kBAAkB4B,EAAO0B,GAAcU,GACtDhE,EAAkB,CAAE4B,WAAUoC,KAC/B,GACA,CAACR,EAAkBF,IR5Di7B,SAAS9f,EAAEzC,EAAEC,EAAE,GAAGrC,GAAE,KAAK,GAAGoC,EAAE,OAAOoC,EAAEjE,IAAI6B,EAAEC,GAAG,IAAImC,EAAE7D,OAAOyB,EAAC,GAAG,CAACA,EAAEC,GAAG,CQ8D9gCijB,EAAS,CAACpC,EAAGI,KACX,MAAML,EAAQ,IAAIuB,EAAUjf,QAAQ0K,UAEpC4U,EAAiBhC,OAAOI,GAAQsC,IAC9B1C,EAAO,CAAEI,WAAUsC,EAAUjC,cAE7BL,EAAMzZ,SAAQ,CAAClE,EAAS6d,KACtB,MAAMxgB,EAAW4iB,EAAS1E,UAAUsC,GAC9BnC,EAAauE,EAASvE,WAAWmC,GAEvCoC,GAAU/D,YAAYlc,GAASA,QAAS,CAEtCE,EAAG7C,EAAS,GAAKqe,EAAW,GAC5B5d,EAAGT,EAAS,IACZ,GACF,GACF,IAIFwd,EAAAnK,cAAA,MAAA,CACEuO,UAAWA,EACXiB,IAAKd,EACL9hB,MAAO,CAAED,SAAU,WAAYyC,MAAO,OAAQC,OAAQ,SAEtD8a,EAAAnK,cAACiO,EAAwBwB,SAAQ,CAC/B3c,MAAO,CAAEic,SAAQG,YAAWL,qBAE3BP,GAIT,CAEA,SAASoB,cAAanB,UACpBA,EAASD,SACTA,EAAQqB,WACRA,EAAa,KAAIxC,MACjBA,EAAQ,KACL5D,IAEH,MAAMwF,OAAEA,EAAMG,UAAEA,EAASL,iBAAEA,GAAqBV,uBACzCyB,EAAYtE,GAAQsD,IACrBiB,EAAapB,IAEnBpE,GAAU,KACR,GAAIwF,EAAWtgB,QAMb,OALAwf,EAAOc,EAAWtgB,QAAS,CACzBD,QAASugB,EAAWtgB,QACpB+b,SAGK,KACL4D,EAAUW,EAAWtgB,QAAQ,CAEjC,GACC,CAAC+b,EAAMyD,EAAQG,IAElB,MAAM/iB,EAAO6d,SAAQ,EAAG3O,OAAM1B,UAAWmW,EAAIC,OACvC1U,GAAQsU,GACVA,EAAW,CAACG,EAAIC,GAAKlB,EAAiB9D,eAAgBoC,EACxD,IAGF,OACEhD,EAAAnK,cAAA,MAAAgQ,SAAA,CACER,IAAMS,IACJJ,EAAWtgB,QAAU0gB,EACrBL,EAAWK,EAAK,EAElB1B,UAAWA,GACPhF,GAEJY,EAAAnK,cAAA,MAAS7T,IAASmiB,GAGxB","x_google_ignoreList":[0,1,2,3,4,5,6,7]}